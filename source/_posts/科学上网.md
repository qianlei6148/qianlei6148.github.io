---
title: 使用v2ray科学上网所遇到的问题
date: 2018-11-10 12:29:31
categories: [翻墙]
tags: [v2ray]
---
[前言](#title)
[第一部分 20Gkvm的vps和10Gkvm的vps](#first)
[第二部分 安装v2ray时遇到的问题](#second)
<!--more-->
[首先遇到了一个大问题：系统](#second-first)
[其次遇到的问题是：时间](#second-second)
[第三个问题是：服务器v2ray配置问题](#second-third)
[第四个问题是：客户端的config配置问题](#second-fourth)
[第五个问题：关于浏览器配置](#second-fifth)
[补充：mac os系统客户端: V2RayX.app](#second-sixth)

### <span id="title">前言</span>
**首先我这篇文章是遇到问题的总结，并不是完整的安装教程。**
想要看完整安装v2ray教程的我推荐两个:
&emsp;第一个是[官方的文档](https://toutyrater.github.io/prep/install.html), 可以了解大致原理和教学安装。
&emsp;第二个比第一个更适合我这种菜鸡[V2Ray完全使用教程](https://yuan.ga/v2ray-complete-tutorial/), 如果只想安装后上网，就看第二个，第二个里面有从购买vps到安装好后, `config.json`中不同协议的内容都有（当然第一个也有）, 包括图形化的客户端。
&emsp;悄悄说一句, 这两个教程其实写的都很罗嗦。哈哈开玩笑的啦。
&emsp;其实安装教程网上都有而且不止这两个, 还有很多,而且都是成功的, 看个人吧。
&emsp;去年，由于蓝灯总是抽风，其他的软件也因为使用量大总是担心自己花了钱，软件却被封了，那就很难受了，这点你们可以到那些网站上看，有很多哭爹喊娘的，这里就不赘述了。反正我就是觉得服务器不是自己的总是不踏实，于是决定买个vps, 我是在[搬瓦工](https://bandwagonhost.com/)上买的，当时买了$49.9的20Gkvm服务器，但一整年除了用来上网就没用它做别的事，因此决定今年换$19.9的10Gkvm。
 &emsp;由于知道`v2ray`这个工具后，一直想试试。但由于平时依赖`ss`上网，总之就是人懒得动怕装坏了，还得重置`ss`, 甚感麻烦，所以一直没动，而今年正好快到期了，于是就买了便宜的`vps`，来装这个工具。在装的过程中遇到了各种麻烦，很头疼，所以记录下来。已备以后查看。

### <span id="first">第一部分 20Gkvm的vps和10Gkvm的vps</span>
 &emsp;首先我买了便宜的之后，打开后台，顿时就发现不一样了，
20Gkvm中，在左边的`KiwiVM Extras`中有插件选择, 里面自带了`ss` 和`ssr`, 也就是说，你无需使用xshell登陆服务器来进行下载安装，只需轻轻一点，即可自动安装完成操作，然后就可以在配置页面中进行配置![ss&ssr](C:\Users\Administrator\Downloads\火狐截图_2018-11-10T05-18-29.469Z.png)非常方便。
&emsp;而`10Gkvm`当我打开后发现`Extras`中并没有这些，好吧，那就自己配吧，这次我想用v2ray。

### <span id="second">第二部分 安装v2ray时遇到的问题</span>
&emsp;我打开了官方推荐的文档，[安照上面写的准备一键安装v2ray](https://toutyrater.github.io/prep/install.html)。
 #### <span id="second-first">首先遇到了一个大问题：系统</span>
在文档中，作者使用脚本安装并且仅推荐脚本安装，而这个脚本是`V2Ray`官方提供。该脚本仅可以在 `Debian` 系列或者支持 Systemd 的 Linux 操作系统使用。而且作者还特别声明
> 除非你是大佬，或者能够自行处理类似 command not found 的问题，否则请你使用 Debian 8.x 以上或者 Ubuntu 16.04 以上的 Linux 系统。 本指南默认使用 Debian 8.7 系统作为示范。

因为这句话让我瞬间决定使用 `Debian 8.x`,我关闭了服务器，重新`install new OS`选择了`Debian`系统, 然后等了一会儿， 然后准备安装文档的命令来进行安装时，系统给我报了个错`linux wget: command not found`,我傻眼了，而且后面不停的让我傻眼 `linux sudo: command not found`, 我顿时觉得不对劲，在经历了几个小时的搏斗后，我发现几乎所有的命令都是`command not found`！这系统刚重装，也没有改过配置，为何会遇到这种情况，于是我决定......换系统!!!
我换了`Ubuntu 16.04`, 然后就是一个词：顺利。我成功的根据文档安装成功。（#@#）！

#### <span id="second-second">其次遇到的问题是：时间</span>
根据文档中描述
> V2Ray 对于时间有比较严格的要求，要求服务器和客户端时间差绝对值不能超过 2 分钟，所以一定要保证时间足够准确。

而在后面安装v2ray中也再次强调了时间准确的重要性。
好吧我继续努力中。。。其实这里我犯了一个严重问题，就是不仔细认真的查看文档！！！
我错了（@#@）！, 其实文档上面那句话后面还有一段
> 还好 V2Ray 并不要求时区一致。

？？？？！！！！！我买的vps是西5区，转换成东8区其实就是我电脑本地的时间！！！惊不惊喜意不意外！其实根本不用改！反正我很累，在上面花了我这个菜鸟一两个小时, 差点都不想用了！

#### <span id="second-third">第三个问题是：服务器v2ray配置问题</span>
其实这是个小问题
使用 [Online UUID Generator](https://www.uuidgenerator.net/) 这个网站生成ID，注意服务端的 ID 需要和客户端保持一致。
在服务器上, 安装jq, 官方推荐的文档上也讲了,可以用来校验`config.json`文件内容是否有错误
```c
//Ubuntu下的jq安装
apt-get install jq
//检查正确与否
cd /etc/v2ray
jq . config.json
```
 校验文件是否正确，错误会报错，正确就会打印显示里面的内容。
然后就是启动问题
启动、停止、重启、看运行状态
```shell
sudo systemctl start/stop/restart/status v2ray
```
其中遇到的问题是，使用`vi config.json`修改保存后，内容跟自己修改的完全不一样, 于是我使用`fileZilla`把文件从服务器上down下来, 在本地改好后，重新上传覆盖。

#### <span id="second-fourth">第四个问题是：客户端的config配置问题</span>
下载了`windows 64位(v2ray-window-64.zip)`的版本后, 修改配置，启动闪退，当然小问题啦，是因为监听的`port:1080`被占用了，于是我改成了`1081`后，启动完美。

#### <span id="second-fifth">第五个问题：关于浏览器配置</span>
这个是我觉得头疼的地方，因为v2ray不会自动帮你配置，你必须手动改，这些官方推荐的文档中已经有详细的教程了，但是很麻烦！不是吗？我是使用3个浏览器的，也就是说我要配置3个！
所以我决定使用那些配置好的图形化工具，我使用的是v2rayN，把下下来的`v2rayN.exe`复制到`v2ray-window-64`中，然后配置，使用`gcm`加密，最后启动。
接着我就可以打开任何浏览器进行浏览啦！
结束！
#### <span id="second-sixth">补充：mac os系统客户端: V2RayX.app</span>

