<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Wa!RayQ&#39;s house</title>
  
  
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2023-10-08T15:16:54.372Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Rayqian</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>记一次hostwinds服务器退款经历</title>
    <link href="http://yoursite.com/2023/10/08/%E8%AE%B0%E4%B8%80%E6%AC%A1hostwinds%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%80%E6%AC%BE%E7%BB%8F%E5%8E%86/"/>
    <id>http://yoursite.com/2023/10/08/%E8%AE%B0%E4%B8%80%E6%AC%A1hostwinds%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%80%E6%AC%BE%E7%BB%8F%E5%8E%86/</id>
    <published>2023-10-08T15:15:53.000Z</published>
    <updated>2023-10-08T15:16:54.372Z</updated>
    
    <content type="html"><![CDATA[<h3 id="退款时间-2023-10-8"><a href="#退款时间-2023-10-8" class="headerlink" title="退款时间: 2023.10.8"></a>退款时间: <code>2023.10.8</code></h3><h3 id="记录原因："><a href="#记录原因：" class="headerlink" title="记录原因："></a>记录原因：</h3><blockquote><p>网上有许多退款教程，但我遇到了不一样的情况，所以在退款成功后，对此进行一次记录。</p></blockquote><span id="more"></span><h3 id="当时的情况"><a href="#当时的情况" class="headerlink" title="当时的情况"></a>当时的情况</h3><blockquote><p>首先我是一年前购买的服务器，但由于大家都懂的原因，导致我逐渐不使用了，这个服务器付款周期是年付，这个周期我从没有变过，而它被设置成免密支付，导致了直接就付款成功了。<br>当10.8发现自己的支付宝有付款记录后，立马网上搜退款方式，网上面有很多说法，不过确定72小时之内退款是没问题的，只是有的是退在网站上有的是直接原路退还。<br>我最后钱是退回到了支付宝里面，并没有退在hostwinds的网站里。</p></blockquote><h3 id="解决经过"><a href="#解决经过" class="headerlink" title="解决经过"></a>解决经过</h3><p>首先肯定是网上搜退款教程，刚开始挺顺利<br>如图下(<a href="https://www.vpsgo.com/hostwinds-how-to-refund.html">教程来自这个地址</a>) 可以点击进入：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/7kg227soMNSO.png"><br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/diksltIxhHD9.png"><br>然后随便选个<code>cancel</code>的理由。<br>到这一步很顺利。<br>随后问题来了：</p><blockquote><p>在教程中说取消服务器会自动生成一个工单，然后根据这个工单来完成取消服务器的流程，随后根据这个取消工单的<code>Service ID</code>来创建一个新的退款的工单，最后退款成功。</p></blockquote><p>这一步无法进行，因为它没有自动生成工单，并且自动帮我取消服务器了，我的服务器状态已经是<code>cancelled</code>，没有工单，也就没有取消工单的<code>Service ID</code>.<br>这让我犯难了，网上搜不到，没法解决？<br>但这是我无疑中点了<code>liveChat</code>，于是问题迎刃而解了。<br>下面是聊天记录，如图：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/dHvBHIarL19r.png"><br>然后打开链接，跳转到<code>ticket</code>页面,并且出现了一份工单<br>如图所示：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/CFYnr3fsa6xI.png"><br>根据聊天的内容来处理<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/0Z05grBOlS1i.png"><br>下图是我的回复内容：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/10/08/Q7YXvzUmpqf9.png"><br>大约半小时候，他回复我退款成功，于是我到支付宝中查看，钱果然退了回来。<br>这就是我退款的全过程。</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;退款时间-2023-10-8&quot;&gt;&lt;a href=&quot;#退款时间-2023-10-8&quot; class=&quot;headerlink&quot; title=&quot;退款时间: 2023.10.8&quot;&gt;&lt;/a&gt;退款时间: &lt;code&gt;2023.10.8&lt;/code&gt;&lt;/h3&gt;&lt;h3 id=&quot;记录原因：&quot;&gt;&lt;a href=&quot;#记录原因：&quot; class=&quot;headerlink&quot; title=&quot;记录原因：&quot;&gt;&lt;/a&gt;记录原因：&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;网上有许多退款教程，但我遇到了不一样的情况，所以在退款成功后，对此进行一次记录。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>使用imewlconverter给Rime添加词库</title>
    <link href="http://yoursite.com/2023/09/01/%E4%BD%BF%E7%94%A8imewlconverter%E7%BB%99Rime%E6%B7%BB%E5%8A%A0%E8%AF%8D%E5%BA%93/"/>
    <id>http://yoursite.com/2023/09/01/%E4%BD%BF%E7%94%A8imewlconverter%E7%BB%99Rime%E6%B7%BB%E5%8A%A0%E8%AF%8D%E5%BA%93/</id>
    <published>2023-09-01T07:24:45.000Z</published>
    <updated>2023-09-01T08:47:33.640Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用imewlconverter给Rime添加词库"><a href="#使用imewlconverter给Rime添加词库" class="headerlink" title="使用imewlconverter给Rime添加词库"></a>使用<code>imewlconverter</code>给<code>Rime</code>添加词库</h1><h2 id="1-什么是Rime"><a href="#1-什么是Rime" class="headerlink" title="1 什么是Rime"></a>1 什么是<code>Rime</code></h2><p>Rime 是跨平臺的輸入法軟件，Rime 輸入方案可通用於以下發行版：</p><span id="more"></span><p>【中州韻】 ibus-rime → Linux<br>【小狼毫】 Weasel → Windows<br>【鼠鬚管】 Squirrel → Mac OS X</p><p>我当前使用的是<code>macbook</code>，所以使用的是<code>鼠鬚管</code>输入法软件，里面自带了多个输入法，我使用的是<code>小鹤双拼</code></p><p>但这里面自带的词库无法满足日常需求，所以想到用<code>搜狗标准词库</code>（<a href="https://pinyin.sogou.com/dict/detail/index/11640">下载地址链接</a>）</p><h2 id="2-什么是imewlconverter"><a href="#2-什么是imewlconverter" class="headerlink" title="2 什么是imewlconverter"></a>2 什么是<code>imewlconverter</code></h2><p>中文名：<code>深蓝词库转换</code><br>是一款开源免费的输入法词库转换程序(<a href="https://github.com/studyzy/imewlconverter">github地址链接</a>),<br>支持批量转换（一次拖拽多个词库文件，或者按住 Ctrl 选择多个文件），支持命令行模式（在命令行下使用-?命令查看帮助），支持 Windows、Linux、MacOS。<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/BgyQ3g607Eye.png"><br>下载自己系统的版本</p><h2 id="3-安装-NET6-0"><a href="#3-安装-NET6-0" class="headerlink" title="3 安装 .NET6.0"></a>3 安装 <code>.NET6.0</code></h2><p>使用<code>imewlconverter</code>需要下载<code>.NET</code>,可以到官网进行下载(<a href="https://dotnet.microsoft.com/zh-cn/download">官网下载链接</a>),并选择<code>6.0</code>这个<code>LTS</code>版本。<br>下载后安装完毕，就可以使用<code>dotnet</code>命令了。</p><p>windows系统好像有图形化界面，mac没看到，所以我使用的mac命令行模式</p><h2 id="4-词库转换"><a href="#4-词库转换" class="headerlink" title="4 词库转换"></a>4 词库转换</h2><p>将从<code>github</code>上下载的包解压缩，并进入文件夹中，执行以下指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#控制台输入以下命令，获取帮助</span><br><span class="line">dotnet ImeWlConverterCmd.dll -?</span><br></pre></td></tr></table></figure><p><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/S3CH13eF0gdZ.png"><br><code>-i:输入的词库类型 词库路径1 词库路径2 词库路径3 -o:输出的词库类型 输出词库路径 -c:编码文件路径</code><br>根据帮助内容，进行转换</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet ImeWlConverterCmd.dll -i:scel ./sougo.scel -o:rime ./luna_pinyin.txt</span><br></pre></td></tr></table></figure><p>完成后，获取生成的文件`luna_pinyin.txt</p><h2 id="5-设置Rime"><a href="#5-设置Rime" class="headerlink" title="5 设置Rime"></a>5 设置<code>Rime</code></h2><p>首先将刚刚生成的文件<code>luna_pinyin.txt</code>重命名为<code>luna_pinyin.sogou.dict.yaml</code>，用来做后续操作。<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/6eaJ5UhSLT0H.png"><br>安装上图，点击<code>用户设定</code>打开<code>Rime</code>文件夹，将刚刚重命名后的文件<code>copy</code>进去。</p><p>控制台打开，进入Rime文件夹<code> ~/Library/Rime</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#打开文件，进行编辑</span><br><span class="line"> vim luna_pinyin.sogou.dict.yaml</span><br></pre></td></tr></table></figure><p>在文件开头添加如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Rime dictionary</span><br><span class="line"># encoding: utf-8</span><br><span class="line"># Luna Pinyin Extended Dictionary(Basic)  - 明月拼音扩充词库（基本）</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">name: luna_pinyin.sogou      # 词库名</span><br><span class="line">version: &quot;2023.08.31&quot;</span><br><span class="line">sort: by_weight                 # by_weight（按词频高低排序）或 original（保持原码表中的顺序）</span><br><span class="line">use_preset_vocabulary: true     # true 或 false，选择是否导入预设词汇表【八股文】</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/6D1lwbflxSyA.png"></p><p>完成以上内容后，需要将文件加载进<code>Rime</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#打开文件</span><br><span class="line"> vim luna_pinyin.extended.dict.yaml</span><br></pre></td></tr></table></figure><p>将<code>luna_pinyin.sogou</code> 这个词库添加进去(如下图)<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/6FcRS8Xc5foR.png"><br>然后将<code>Rime</code>重新部署下，词库即可生效。</p><h2 id="6-文中处理的一些疑问"><a href="#6-文中处理的一些疑问" class="headerlink" title="6 文中处理的一些疑问"></a>6 文中处理的一些疑问</h2><h4 id="1-为什么要在luna-pinyin-extended-dict-yaml中添加"><a href="#1-为什么要在luna-pinyin-extended-dict-yaml中添加" class="headerlink" title="1 为什么要在luna_pinyin.extended.dict.yaml中添加"></a>1 为什么要在<code>luna_pinyin.extended.dict.yaml</code>中添加</h4><p>原因：<br>打开你自己输入法的配置文件，我的是<code>小鹤双拼</code>，所以打开<code>vim double_pinyin_flypy.custom.yaml</code><br>文件内容中显示如下：<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/09/01/TcYLG2pYWtpR.png"><br>它扩展词库加载的就是<code>luna_pinyin.extended.dict.yaml</code>这个文件，所以我们将词库配置在这个文件中</p><h4 id="2-刚安装好后，我发现使用dotnet命令出错"><a href="#2-刚安装好后，我发现使用dotnet命令出错" class="headerlink" title="2 刚安装好后，我发现使用dotnet命令出错"></a>2 刚安装好后，我发现使用<code>dotnet</code>命令出错</h4><p>提示报错：<code>zsh:no matches found</code>，这个问题<br>解决方式：<br>打开文件<code>~/.zshrc</code> ，添加内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setopt no_nomatch</span><br></pre></td></tr></table></figure><p>退出文件，并更新</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;使用imewlconverter给Rime添加词库&quot;&gt;&lt;a href=&quot;#使用imewlconverter给Rime添加词库&quot; class=&quot;headerlink&quot; title=&quot;使用imewlconverter给Rime添加词库&quot;&gt;&lt;/a&gt;使用&lt;code&gt;imewlconverter&lt;/code&gt;给&lt;code&gt;Rime&lt;/code&gt;添加词库&lt;/h1&gt;&lt;h2 id=&quot;1-什么是Rime&quot;&gt;&lt;a href=&quot;#1-什么是Rime&quot; class=&quot;headerlink&quot; title=&quot;1 什么是Rime&quot;&gt;&lt;/a&gt;1 什么是&lt;code&gt;Rime&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;Rime 是跨平臺的輸入法軟件，Rime 輸入方案可通用於以下發行版：&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>zsh:no matches found 问题</title>
    <link href="http://yoursite.com/2023/08/31/no-matches-found%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2023/08/31/no-matches-found%E9%97%AE%E9%A2%98/</id>
    <published>2023-08-31T08:48:52.000Z</published>
    <updated>2023-09-03T01:50:24.294Z</updated>
    
    <content type="html"><![CDATA[<h2 id="zsh-no-matches-found"><a href="#zsh-no-matches-found" class="headerlink" title="zsh:no matches found"></a>zsh:no matches found</h2><p>解决方法：<br>打开文件<code>~/.zshrc</code> ，添加内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setopt no_nomatch</span><br></pre></td></tr></table></figure><p>退出文件，更新：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;zsh-no-matches-found&quot;&gt;&lt;a href=&quot;#zsh-no-matches-found&quot; class=&quot;headerlink&quot; title=&quot;zsh:no matches found&quot;&gt;&lt;/a&gt;zsh:no matches found&lt;/h2&gt;&lt;</summary>
      
    
    
    
    
    <category term="question" scheme="http://yoursite.com/tags/question/"/>
    
  </entry>
  
  <entry>
    <title>更快的mvn：mvnd</title>
    <link href="http://yoursite.com/2023/07/26/%E4%BD%BF%E7%94%A8mvnd%E6%9D%A5%E5%8F%96%E4%BB%A3mvn/"/>
    <id>http://yoursite.com/2023/07/26/%E4%BD%BF%E7%94%A8mvnd%E6%9D%A5%E5%8F%96%E4%BB%A3mvn/</id>
    <published>2023-07-26T01:25:59.000Z</published>
    <updated>2023-09-01T08:47:24.553Z</updated>
    
    <content type="html"><![CDATA[<h1 id="更快的mvn：mvnd"><a href="#更快的mvn：mvnd" class="headerlink" title="更快的mvn：mvnd"></a>更快的mvn：mvnd</h1><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><span id="more"></span><blockquote><h3 id="maven-mvnd"><a href="#maven-mvnd" class="headerlink" title="maven-mvnd"></a><strong><code>maven-mvnd</code></strong></h3><p>Maven 守护版，旨在为 Maven 提供更快的构建速度，灵感借鉴了 Gradle 和 Takari（Maven 生命周期优化器）<br>Maven 和 Gradle 可以说是项目构建工具中的绝代双骄。</p><p>Maven 的优点是稳定可靠，在绝大多数的项目上工作良好，社区生态很完善，几乎所有的 Java 开发者都在用。Maven 的缺点是，对于大一点的项目来说，构建太慢了。</p></blockquote><blockquote><p>Gradle 的优点是足够的灵活，构建速度也会更快一点，因为使用了后台进程和缓存机制。Gradle 的缺点是版本迭代速度太快，社区跟不上，对于初学者来说，学习曲线比较陡峭。</p></blockquote><p>mvnd 并不是 Maven 的重构版，等于是 Maven ∩ (Gradle &amp; Takari) 部分优点的一个交集。</p><blockquote><p>mvnd 使用了以下架构方式：</p></blockquote><ul><li>内部嵌入了 Maven，所以不需要单独安装 Maven。</li><li>使用守护进程进行构建，守护进程可以为多个 mvnd 客户端的连续请求提供服务。</li><li>使用了内置的 GraalVM 虚拟机，和传统的 Java 虚拟机相比，它的启动速度更快，使用内存更少，内部的 JIT 编译器在编译时花费的时间也更少。</li><li>如果已有的守护进程都在工作中，则可以新建多个守护进程来支撑新的构建请求。</li></ul><p>这种架构方式使得 mvnd 的性能优势得到了进一步提升。</p><h2 id="2-安装使用"><a href="#2-安装使用" class="headerlink" title="2.安装使用"></a>2.安装使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Windows</span><br><span class="line">choco install mvndaemon </span><br><span class="line"># Linux</span><br><span class="line">sdk install mvnd</span><br><span class="line"># macOS</span><br><span class="line">brew install mvndaemon/homebrew-mvnd/mvnd</span><br></pre></td></tr></table></figure><p>安装后，直接想<code>mvn</code>一样使用即可，只不过<code>mvn</code>要改成<code>mvnd</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvnd -v</span><br><span class="line">mvnd clean install</span><br></pre></td></tr></table></figure><h2 id="3-遇到的问题及解决"><a href="#3-遇到的问题及解决" class="headerlink" title="3.遇到的问题及解决"></a>3.遇到的问题及解决</h2><p>1.私有库的连接<br>正常使用公有库是没问题，但使用私有库，则会出现连不上的问题，此时需要进入mvnd的安装目录并打开<code>conf/settings.xml</code><br>将<code>mirrors</code>标签下的默认<code>mirror</code>注释掉，即可（看下图）<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/07/26/TvXZFlyxE9ec.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;更快的mvn：mvnd&quot;&gt;&lt;a href=&quot;#更快的mvn：mvnd&quot; class=&quot;headerlink&quot; title=&quot;更快的mvn：mvnd&quot;&gt;&lt;/a&gt;更快的mvn：mvnd&lt;/h1&gt;&lt;h2 id=&quot;1-介绍&quot;&gt;&lt;a href=&quot;#1-介绍&quot; class=&quot;headerlink&quot; title=&quot;1.介绍&quot;&gt;&lt;/a&gt;1.介绍&lt;/h2&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>maven、npm配置仓库账号密码</title>
    <link href="http://yoursite.com/2023/07/21/maven%E3%80%81npm%E9%85%8D%E7%BD%AE%E4%BB%93%E5%BA%93%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/"/>
    <id>http://yoursite.com/2023/07/21/maven%E3%80%81npm%E9%85%8D%E7%BD%AE%E4%BB%93%E5%BA%93%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/</id>
    <published>2023-07-21T02:46:09.000Z</published>
    <updated>2023-09-03T01:50:55.035Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>java、vue前端等应用开发时，如果公司的私有依赖库关闭匿名访问，则需要先配置账号密码才能获取依赖资源，java应用需要配置maven账号密码，vue前端应用需要配置npm账号密码，配置方式如下：</p></blockquote><span id="more"></span><h3 id="1、maven配置仓库账号密码"><a href="#1、maven配置仓库账号密码" class="headerlink" title="1、maven配置仓库账号密码"></a>1、maven配置仓库账号密码</h3><p>1.1 进入maven安装目录<br>1.2 进入conf目录<br>1.3 修改settings.xml文件<br>在<code>settings.xml</code>文件**<code>servers</code>**标签中，添加内容。</p><blockquote><blockquote><p>[仓库id]为工程中pom文件配置的依赖私有仓库id，[账号]为对应仓库的账号，[密码]为对应仓库的账号密码</p></blockquote></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>[仓库id]<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>[账号]<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>[密码]<span class="tag">&lt;/<span class="name">password</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span> </span><br></pre></td></tr></table></figure><p><code>settings.xml</code>文件修改保存后，即可通过maven命令拉取依赖资源。</p><h3 id="2、npm配置仓库账号密码"><a href="#2、npm配置仓库账号密码" class="headerlink" title="2、npm配置仓库账号密码"></a>2、npm配置仓库账号密码</h3><p>需要先在本地登录仓库，操作如下：<br>在本地cmd执行命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login --registry https://xxx.xxx.xx/repository/npm-public/</span><br></pre></td></tr></table></figure><p>依次输入对应仓库的账号、密码、邮箱。<br>登录完成后，即可通过npm命令拉取对应仓库依赖资源。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;java、vue前端等应用开发时，如果公司的私有依赖库关闭匿名访问，则需要先配置账号密码才能获取依赖资源，java应用需要配置maven账号密码，vue前端应用需要配置npm账号密码，配置方式如下：&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="maven" scheme="http://yoursite.com/tags/maven/"/>
    
  </entry>
  
  <entry>
    <title>mac fm2023 美化</title>
    <link href="http://yoursite.com/2023/06/19/mac-fm2023-%E7%BE%8E%E5%8C%96/"/>
    <id>http://yoursite.com/2023/06/19/mac-fm2023-%E7%BE%8E%E5%8C%96/</id>
    <published>2023-06-19T02:24:26.000Z</published>
    <updated>2023-09-03T01:48:11.067Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>下载完fm后,想放入头像和logo,但网上基本都是windows的<br>试了很多次，终于成功了，文件存放如下</p></blockquote><span id="more"></span><p>文件存放<br>使用steam下载，美化包存放的位置,其中这个library是隐藏起来的，如果想知道怎么解除，可以百度一下</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#主目录</span><br><span class="line"><span class="built_in">cd</span> /Users/shenyi/Library/Application Support/Sports Interactive</span><br><span class="line">#皮肤</span><br><span class="line"><span class="built_in">cd</span> /Users/shenyi/Library/Application Support/Sports Interactive/skins</span><br><span class="line">#logo</span><br><span class="line"><span class="built_in">cd</span> /Users/shenyi/Library/Application Support/Sports Interactive/pictures/logos</span><br><span class="line">#头像</span><br><span class="line"><span class="built_in">cd</span> /Users/shenyi/Library/Application Support/Sports Interactive/graphics/players</span><br></pre></td></tr></table></figure><p>或者可以直接控制台输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Library</span><br></pre></td></tr></table></figure><p>可以看以下图片<br><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2023/06/19/axKBSwFrjxD0.png"></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;下载完fm后,想放入头像和logo,但网上基本都是windows的&lt;br&gt;试了很多次，终于成功了，文件存放如下&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="game" scheme="http://yoursite.com/tags/game/"/>
    
  </entry>
  
  <entry>
    <title>JS判断undefined和null和空字符串</title>
    <link href="http://yoursite.com/2023/05/10/JS%E5%88%A4%E6%96%AD/"/>
    <id>http://yoursite.com/2023/05/10/JS%E5%88%A4%E6%96%AD/</id>
    <published>2023-05-10T09:32:53.000Z</published>
    <updated>2023-09-03T01:47:15.115Z</updated>
    
    <content type="html"><![CDATA[<p>一般新人会这样写：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (data!=<span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span>(data)!=<span class="literal">undefined</span> &amp;&amp; $.trim(data) != <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>其实可以这么写：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断是undefined\null\空字符串</span></span><br><span class="line"><span class="keyword">if</span> (!data)</span><br><span class="line"><span class="comment">//判断不是undefined\null\空字符串</span></span><br><span class="line"><span class="keyword">if</span> (!!data)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;一般新人会这样写：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;</summary>
      
    
    
    
    <category term="technology" scheme="http://yoursite.com/categories/technology/"/>
    
    
    <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>excel导入csv</title>
    <link href="http://yoursite.com/2023/04/23/excel%E5%AF%BC%E5%85%A5csv/"/>
    <id>http://yoursite.com/2023/04/23/excel%E5%AF%BC%E5%85%A5csv/</id>
    <published>2023-04-23T07:39:41.000Z</published>
    <updated>2023-04-23T07:43:46.870Z</updated>
    
    <content type="html"><![CDATA[<h2 id="EXCEL导入csv信息"><a href="#EXCEL导入csv信息" class="headerlink" title="EXCEL导入csv信息"></a>EXCEL导入csv信息</h2><p>由于csv文件直接用excel打开可能会有编码问题，会出现乱码，所以需要导入到excel</p><p> Excel -&gt; 执行”数据”-&gt;”自文本” -&gt; 选择 CSV 文件，出现文本导入向导 -&gt; 选择”分隔符号”，下一步 -&gt; 勾选”逗号”，下一步，完成 -&gt; 在“导入数据”对话框里，直接点”确定”</p><p>tips：本人使用mac，需要选择字体，选择UTF-8</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;EXCEL导入csv信息&quot;&gt;&lt;a href=&quot;#EXCEL导入csv信息&quot; class=&quot;headerlink&quot; title=&quot;EXCEL导入csv信息&quot;&gt;&lt;/a&gt;EXCEL导入csv信息&lt;/h2&gt;&lt;p&gt;由于csv文件直接用excel打开可能会有编码问题，会出现乱</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>git提交规范 Commitizen</title>
    <link href="http://yoursite.com/2023/02/27/git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%20Commitizen/"/>
    <id>http://yoursite.com/2023/02/27/git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%20Commitizen/</id>
    <published>2023-02-27T02:40:38.000Z</published>
    <updated>2023-09-03T01:46:33.548Z</updated>
    
    <content type="html"><![CDATA[<h2 id="git提交规范-Commitizen"><a href="#git提交规范-Commitizen" class="headerlink" title="git提交规范 Commitizen"></a>git提交规范 Commitizen</h2><p>   Commitizen是一个撰写符合上面Commit Message标准的一款工具，可以帮助开发者提交符合规范的Commit Message。</p><blockquote><p>安装</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装提交</span><br><span class="line">npm install commitizen -g</span><br><span class="line"># 安装规范</span><br><span class="line">npm install -g cz-conventional-changelog</span><br></pre></td></tr></table></figure><p>安装好后，使用<code>cz</code>，<code>git cz</code>或者<code>git-cz</code> 来取代<code>git commit</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;git提交规范-Commitizen&quot;&gt;&lt;a href=&quot;#git提交规范-Commitizen&quot; class=&quot;headerlink&quot; title=&quot;git提交规范 Commitizen&quot;&gt;&lt;/a&gt;git提交规范 Commitizen&lt;/h2&gt;&lt;p&gt;   Com</summary>
      
    
    
    
    <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
    <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>vim模式 输入法中英文切换</title>
    <link href="http://yoursite.com/2023/02/23/vim%E6%A8%A1%E5%BC%8F-%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2/"/>
    <id>http://yoursite.com/2023/02/23/vim%E6%A8%A1%E5%BC%8F-%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2/</id>
    <published>2023-02-23T02:54:12.000Z</published>
    <updated>2023-09-03T01:50:07.944Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近开始频繁的使用vim模式，但有一种情况让我很难受，那就是当我使用拼音写完注释后，切回vim-normal模式时，输入法仍然是中文，每次都要再次切到中文，特别是在客户领导在旁边催你进度时尤为明显。<br>最近在刷b站时碰巧刷到一个up的视频，终于找到一个解决方案，vim_mode我会在vscode、iterm2和idea中都会用到，所以改变输入法是最好的选择<br>备注来源：b站up主 阿崔cxr</p></blockquote><h1 id="Rime-Squirrel-鼠须管输入法"><a href="#Rime-Squirrel-鼠须管输入法" class="headerlink" title="Rime Squirrel 鼠须管输入法"></a>Rime Squirrel 鼠须管输入法</h1><span id="more"></span><p><a href="https://rime.im/">RIME|中州韻輸入法引擎</a> 是一款聪明的输入法，它是一款可以由用户自己来制作的输入法，虽然自己定制的门坎会高，但如果你有耐心就可以根据这个输入法引擎自己来设计。(RIME一个开源(github)的可高度定制的输入法(框架)<br>本身下载下来就可以直接使用，只不过默认的中文是繁体字。<br>如果不想设计也不要紧，因为已经有很多成品可以使用。<br><a href="https://github.com/ssnhd/rime">ssnhd/rime</a>配置文件可以帮助你，打开网址，下载下来，里面的花园明朝字体需要安装，用来解决生僻字，而配置文件则可以直接复制copy到输入法里面的配置中，之后点击重新部署就完成了。</p><p>至此输入法就处理好了，接下来就处理vim_mode中英文切换<br>配置文件<code>squirrel.custom.yaml</code>最下面的配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> # 特定App默认中/英文输入   </span><br><span class="line">app_options:    </span><br><span class="line">  com.apple.Spotlight:             # 聚焦搜索</span><br><span class="line">      ascii_mode: true             # true默认英文,false默认中文</span><br><span class="line">  com.runningwithcrayons.Alfred:   # alfred</span><br><span class="line">      ascii_mode: true</span><br><span class="line">  com.apple.Terminal:              # 终端</span><br><span class="line">      ascii_mode: true</span><br><span class="line">      ascii_punct: true</span><br><span class="line">  com.microsoft.VSCode:            # Visual Studio Code</span><br><span class="line">      ascii_mode: true</span><br><span class="line">      ascii_punct: true            # 中文状态输出英文标点(半角) </span><br><span class="line">      vim_mode: true               # 设置vim模式,insert模式切换到normal模式时,自动变成英文输入</span><br><span class="line">  com.tencent.Lemon:               # 腾讯柠檬</span><br><span class="line">      ascii_mode: true</span><br><span class="line">  com.apple.dt.Xcode:              # Xcode</span><br><span class="line">      ascii_mode: true</span><br><span class="line">  com.nektony.App-Cleaner-SII:     # App Cleaner &amp; Uninstaller</span><br><span class="line">      ascii_mode: true</span><br><span class="line">  com.xunyong.hapigo:              # hapigo</span><br><span class="line">      ascii_mode: true</span><br><span class="line">  com.jetbrains.intellij:          # intellij   idea</span><br><span class="line">      ascii_mode: true</span><br><span class="line">      ascii_punct: true</span><br><span class="line">      vim_mode: true</span><br><span class="line">  com.googlecode.iterm2:           #iterm2</span><br><span class="line">      ascii_mode: true</span><br><span class="line">      ascii_punct: true</span><br><span class="line">      vim_mode: true</span><br></pre></td></tr></table></figure><h2 id="重新部署后，就能愉快的使用了。"><a href="#重新部署后，就能愉快的使用了。" class="headerlink" title="重新部署后，就能愉快的使用了。"></a>重新部署后，就能愉快的使用了。</h2><h2 id="去除ctrl-快捷键"><a href="#去除ctrl-快捷键" class="headerlink" title="去除ctrl+~快捷键"></a>去除ctrl+~快捷键</h2><p><code>ctrl+~</code> 快捷键是切换输入方案菜单的快捷键,但在使用<code>idea</code>或者<code>vsCode</code>时会快捷键冲突,所以需要注释<br>在输入法菜单中选择<code>用户设定</code>,打开目录后,打开配置文件<code>default.yaml</code>(这是我本机的位置)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim build/default.yaml</span><br></pre></td></tr></table></figure><p>找到<code>switcher</code>,并注释<code>- Control+grave</code><br>处理完结果如下</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">switcher:</span><br><span class="line">  abbreviate_option<span class="variable">s:</span> true</span><br><span class="line">  caption: <span class="string">&quot;〔方案選單〕&quot;</span></span><br><span class="line">  fold_option<span class="variable">s:</span> true</span><br><span class="line">  hotkey<span class="variable">s:</span></span><br><span class="line">    # - <span class="string">&quot;Control+grave&quot;</span></span><br><span class="line">    - <span class="string">&quot;Control+Shift+grave&quot;</span></span><br><span class="line">    - F4</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;最近开始频繁的使用vim模式，但有一种情况让我很难受，那就是当我使用拼音写完注释后，切回vim-normal模式时，输入法仍然是中文，每次都要再次切到中文，特别是在客户领导在旁边催你进度时尤为明显。&lt;br&gt;最近在刷b站时碰巧刷到一个up的视频，终于找到一个解决方案，vim_mode我会在vscode、iterm2和idea中都会用到，所以改变输入法是最好的选择&lt;br&gt;备注来源：b站up主 阿崔cxr&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Rime-Squirrel-鼠须管输入法&quot;&gt;&lt;a href=&quot;#Rime-Squirrel-鼠须管输入法&quot; class=&quot;headerlink&quot; title=&quot;Rime Squirrel 鼠须管输入法&quot;&gt;&lt;/a&gt;Rime Squirrel 鼠须管输入法&lt;/h1&gt;</summary>
    
    
    
    
    <category term="vim" scheme="http://yoursite.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>macvim和tmux 安装配置</title>
    <link href="http://yoursite.com/2022/11/06/macvim-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2022/11/06/macvim-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/</id>
    <published>2022-11-06T08:42:18.000Z</published>
    <updated>2023-09-03T01:51:24.381Z</updated>
    
    <content type="html"><![CDATA[<h1 id="macvim-和-tmux-安装"><a href="#macvim-和-tmux-安装" class="headerlink" title="macvim 和 tmux 安装"></a>macvim 和 tmux 安装</h1><span id="more"></span><h1 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看预装vim版本</span></span><br><span class="line">vim --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看预装vim路径</span></span><br><span class="line"><span class="built_in">where</span> vim</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用brew 安装</span></span><br><span class="line">brew install macvim</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为macvim中的vim创建别名，将其添加至~/.zshrc配置文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;alias vim=&quot;/usr/local/Cellar/macvim/8.0-133/MacVim.app/Contents/MacOS/vim&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="comment"># 重新加载.zshrc以使修改生效 </span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>然后直接输入<code>vim</code>就能打开macvim<br>接下来给vim做配置</p><h1 id="vim配置参数"><a href="#vim配置参数" class="headerlink" title="vim配置参数"></a>vim配置参数</h1><p>给<code>vim</code>添加参数</p><h3 id="安装vim插件管理器——Vundle"><a href="#安装vim插件管理器——Vundle" class="headerlink" title="安装vim插件管理器——Vundle"></a>安装vim插件管理器——Vundle</h3><p><code>vim</code>的插件管理工具，安装、更新和移除vim插件，不需要手动来管理vim插件</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure><p>安装好后，所有的插件都会在<code>~/.vim/bundle/</code>目录下，接下来可以通过<code>.vimrc</code>配置文件来管理所有扩展了。<br>可以到<code>github</code>中查看如何配置，下面是精简后的（<code>.vimrc</code>文件）</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible              <span class="comment">&quot; 去除VI一致性,必须</span></span><br><span class="line"><span class="keyword">filetype</span> off                  <span class="comment">&quot; 必须</span></span><br><span class="line"><span class="comment">&quot; set the runtime path to include vundle and initialize</span></span><br><span class="line"><span class="keyword">set</span> rtp+=~/.<span class="keyword">vim</span>/bundle/Vundle.<span class="keyword">vim</span></span><br><span class="line"><span class="keyword">call</span> vundle#begin()</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 接下来就可以把插件放进去了，</span></span><br><span class="line"><span class="comment">&quot; 这两个是官方默认放入的插件</span></span><br><span class="line">Plugin <span class="string">&#x27;vundlevim/vundle.vim&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;tpope/vim-fugitive&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 结尾</span></span><br><span class="line"><span class="keyword">call</span> vundle#end()            <span class="comment">&quot; required</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span>    <span class="comment">&quot; required</span></span><br></pre></td></tr></table></figure><p>把插件放入 <code>call vundle#begin()</code> 和 <code>call vundle#end() </code>直接，使用<code>Plugin</code>开头。<br>配置后，控制台输入<code>vim</code>, 在<code>normal</code>模式下（也就是刚刚进入时的状态），输入并运行命令<code>:PluginInstall</code>来进行安装插件</p><h4 id="给macvim添加树状目录——NERDTree"><a href="#给macvim添加树状目录——NERDTree" class="headerlink" title="给macvim添加树状目录——NERDTree"></a>给macvim添加树状目录——NERDTree</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot;  添加插件</span></span><br><span class="line">Plugin <span class="string">&#x27;preservim/nerdtree&#x27;</span></span><br></pre></td></tr></table></figure><p>文档：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">F3：自定义启用/隐藏目录树</span><br><span class="line">?: 快速帮助文档</span><br><span class="line">o: 打开一个目录或者打开文件，创建的是buffer，也可以用来打开书签</span><br><span class="line">go: 打开一个文件，但是光标仍然留在NERDTree，创建的是buffer</span><br><span class="line">t: 打开一个文件，创建的是Tab，对书签同样生效</span><br><span class="line">T: 打开一个文件，但是光标仍然留在NERDTree，创建的是Tab，对书签同样生效</span><br><span class="line">i: 水平分割创建文件的窗口，创建的是buffer</span><br><span class="line">gi: 水平分割创建文件的窗口，但是光标仍然留在NERDTree</span><br><span class="line">s: 垂直分割创建文件的窗口，创建的是buffer</span><br><span class="line">gs: 和gi，go类似</span><br><span class="line">x: 收起当前打开的目录</span><br><span class="line">X: 收起所有打开的目录</span><br><span class="line">e: 以文件管理的方式打开选中的目录</span><br><span class="line">D: 删除书签</span><br><span class="line">P: 大写，跳转到当前根路径</span><br><span class="line">p: 小写，跳转到光标所在的上一级路径</span><br><span class="line">K: 跳转到第一个子路径</span><br><span class="line">J: 跳转到最后一个子路径</span><br><span class="line">&lt;C-j&gt;和&lt;C-k&gt;: 在同级目录和文件间移动，忽略子目录和子文件</span><br><span class="line">C: 将根路径设置为光标所在的目录</span><br><span class="line">u: 设置上级目录为根路径</span><br><span class="line">U: 设置上级目录为跟路径，但是维持原来目录打开的状态</span><br><span class="line">r: 刷新光标所在的目录</span><br><span class="line">R: 刷新当前根路径</span><br><span class="line">I: 显示或者不显示隐藏文件</span><br><span class="line">f: 打开和关闭文件过滤器</span><br><span class="line">q: 关闭NERDTree</span><br><span class="line">A: 全屏显示NERDTree，或者关闭全屏</span><br></pre></td></tr></table></figure><p>配置相关内容，下面是我文件的配置内容<br><code>.vimrc</code> 文件中的内容</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">number</span></span><br><span class="line"><span class="keyword">set</span> ruler</span><br><span class="line"><span class="keyword">set</span> showcmd</span><br><span class="line"><span class="keyword">set</span> showtabline=<span class="number">0</span>               <span class="string">&quot;隐藏顶部标签栏&quot;</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=r               <span class="string">&quot;隐藏右侧滚动条&quot;</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=L               <span class="string">&quot;隐藏左侧滚动条&quot;</span></span><br><span class="line"><span class="keyword">set</span> guioptions-=<span class="keyword">b</span>               <span class="string">&quot;隐藏底部滚动条&quot;</span></span><br><span class="line"><span class="keyword">set</span> cursorline                  <span class="string">&quot;突出显示当前行&quot;</span></span><br><span class="line"><span class="string">&quot; set cursorcolumn                突出显示当前列&quot;</span></span><br><span class="line"><span class="keyword">set</span> langmenu=zh_CN.UTF-<span class="number">8</span>        <span class="comment">&quot;显示中文菜单</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">history</span>=<span class="number">1000</span></span><br><span class="line"><span class="comment">&quot; set fileencodings=utf-8,gb2312,gbk,cp936,latin-1</span></span><br><span class="line"><span class="keyword">set</span> fileencoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> termencoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> fileformat=unix</span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">colorscheme</span> desert</span><br><span class="line"><span class="keyword">set</span> t_Co=<span class="number">256</span></span><br><span class="line"><span class="keyword">set</span> wildmenu</span><br><span class="line"><span class="keyword">set</span> autoindent</span><br><span class="line"><span class="keyword">set</span> smartindent<span class="comment">&quot; 开启新行时使用智能自动缩进</span></span><br><span class="line"><span class="keyword">set</span> expandtab</span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> backspace+=<span class="built_in">indent</span>,eol,start <span class="comment">&quot;set backspace&amp;可以对其重置</span></span><br><span class="line"><span class="keyword">set</span> softtabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> showmatch<span class="comment">&quot; 插入括号时，短暂地跳转到匹配的对应括号</span></span><br><span class="line"><span class="keyword">set</span> scrolloff=<span class="number">3</span>                 <span class="string">&quot;距离顶部和底部3行&quot;</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span>                <span class="string">&quot;命令行为两行&quot;</span></span><br><span class="line"><span class="keyword">au</span> FileType html,<span class="keyword">python</span>,<span class="keyword">vim</span>,javascript <span class="keyword">setl</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">au</span> FileType html,<span class="keyword">python</span>,<span class="keyword">vim</span>,javascript <span class="keyword">setl</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">au</span> FileType java,php <span class="keyword">setl</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">au</span> FileType java,php <span class="keyword">setl</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> hlsearch<span class="comment">&quot; 搜索时高亮显示被找到的文本</span></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span>                     <span class="string">&quot;启用鼠标&quot;</span></span><br><span class="line"><span class="keyword">set</span> selection=exclusive</span><br><span class="line"><span class="keyword">set</span> selectmode=mouse,key</span><br><span class="line"><span class="keyword">set</span> matchtime=<span class="number">5</span></span><br><span class="line"><span class="keyword">set</span> ignorecase                  <span class="string">&quot;忽略大小写&quot;</span></span><br><span class="line"><span class="keyword">set</span> incsearch</span><br><span class="line"><span class="keyword">set</span> noexpandtab                 <span class="string">&quot;不允许扩展table&quot;</span></span><br><span class="line"><span class="keyword">set</span> whichwrap+=&lt;,&gt;,h,<span class="keyword">l</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span></span><br><span class="line"><span class="keyword">set</span> completeopt=longest,<span class="keyword">menu</span></span><br><span class="line"><span class="keyword">set</span> noeb</span><br><span class="line"><span class="keyword">set</span> autowrite</span><br><span class="line"><span class="keyword">set</span> cursorline</span><br><span class="line"><span class="keyword">set</span> clipboard+=unnamed</span><br><span class="line"><span class="keyword">set</span> autoread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> nocompatible              <span class="comment">&quot; 去除VI一致性,必须</span></span><br><span class="line"><span class="keyword">filetype</span> off                  <span class="comment">&quot; 必须</span></span><br><span class="line"><span class="comment">&quot; set the runtime path to include vundle and initialize</span></span><br><span class="line"><span class="keyword">set</span> rtp+=~/.<span class="keyword">vim</span>/bundle/Vundle.<span class="keyword">vim</span></span><br><span class="line"><span class="keyword">call</span> vundle#begin()</span><br><span class="line"><span class="comment">&quot; alternatively, pass a path where vundle should install plugins</span></span><br><span class="line"><span class="comment">&quot;call vundle#begin(&#x27;~/some/path/here&#x27;)</span></span><br><span class="line"><span class="comment">&quot; let vundle manage vundle, required</span></span><br><span class="line">Plugin <span class="string">&#x27;vundlevim/vundle.vim&#x27;</span></span><br><span class="line"><span class="keyword">map</span><span class="symbol">&lt;F6&gt;</span> :CommandT <span class="symbol">&lt;CR&gt;</span></span><br><span class="line">Plugin <span class="string">&#x27;preservim/tagbar&#x27;</span></span><br><span class="line"><span class="keyword">map</span><span class="symbol">&lt;F5&gt;</span> :TagbarOpen <span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:tagbar_ctags_bin</span>=<span class="string">&#x27;/usr/local/bin/ctags&#x27;</span></span><br><span class="line"><span class="keyword">let</span> Tagbar_Show_One_File=<span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> Tagbar_WinWidt=<span class="number">11</span></span><br><span class="line"><span class="keyword">let</span> Tagbar_Use_Right_Window=<span class="number">1</span></span><br><span class="line"><span class="comment">&quot;autocmd BufReadPost *.py,*.cpp,*.c,*.h,*.hpp,*.cc,*.cxx call tagbar#autoopen() </span></span><br><span class="line"><span class="keyword">autocmd</span> VimEnter  *  nested :TagbarOpen</span><br><span class="line">Plugin <span class="string">&#x27;scrooloose/nerdcommenter&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;bling/vim-airline&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_powerline_fonts</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; the following are examples of different formats supported.</span></span><br><span class="line"><span class="comment">&quot; keep plugin commands between vundle#begin/end.</span></span><br><span class="line"><span class="comment">&quot; plugin on github repo</span></span><br><span class="line">Plugin <span class="string">&#x27;tpope/vim-fugitive&#x27;</span></span><br><span class="line"></span><br><span class="line">Plugin <span class="string">&#x27;preservim/nerdtree&#x27;</span></span><br><span class="line"><span class="comment">&quot;使用F3键快速调出和隐藏它</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;F3&gt;</span> :NERDTreeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> NERDTreeChDirMode=<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeDirArrowExpandable</span> = <span class="string">&#x27;▸&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeDirArrowCollapsible</span> = <span class="string">&#x27;▾&#x27;</span></span><br><span class="line"><span class="comment">&quot; open NERDTree automatically when VIM start</span></span><br><span class="line"><span class="comment">&quot; autocmd vimenter * NERDTree</span></span><br><span class="line"><span class="keyword">let</span> NERDTreeIgnore = [<span class="string">&#x27;\.pyc$&#x27;</span>, <span class="string">&#x27;\.swp&#x27;</span>, <span class="string">&#x27;\.swo&#x27;</span>, <span class="string">&#x27;\.vscode&#x27;</span>, <span class="string">&#x27;__pycache__&#x27;</span>]</span><br><span class="line"><span class="comment">&quot;How can I open NERDTree automatically when vim starts up on opening a directory?</span></span><br><span class="line"><span class="comment">&quot;autocmd StdinReadPre * let s:std_in=1</span></span><br><span class="line"><span class="string">&quot;autocmd VimEnter * if argc() == 1 &amp;&amp; isdirectory(argv()[0]) &amp;&amp; !exists(&quot;</span><span class="variable">s:std_in</span><span class="comment">&quot;) | exe &#x27;NERDTree&#x27; argv()[0] | wincmd p | ene | endif</span></span><br><span class="line"><span class="comment">&quot; 关闭vim时，如果打开的文件除了NERDTree没有其他文件时，它自动关闭，减少多次按:q!</span></span><br><span class="line"><span class="comment">&quot; Exit Vim if NERDTree is the only window remaining in the only tab.</span></span><br><span class="line"><span class="comment">&quot;autocmd BufEnter * if tabpagenr(&#x27;$&#x27;) == 1 &amp;&amp; winnr(&#x27;$&#x27;) == 1 &amp;&amp; exists(&#x27;b:NERDTree&#x27;) &amp;&amp; b:NERDTree.isTabTree() | quit | endif</span></span><br><span class="line"><span class="comment">&quot; Close the tab if NERDTree is the only window remaining in it.</span></span><br><span class="line"><span class="keyword">autocmd</span> BufEnter * <span class="keyword">if</span> <span class="built_in">winnr</span>(<span class="string">&#x27;$&#x27;</span>) == <span class="number">1</span> &amp;&amp; <span class="built_in">exists</span>(<span class="string">&#x27;b:NERDTree&#x27;</span>) &amp;&amp; <span class="variable">b:NERDTree</span>.isTabTree() | <span class="keyword">quit</span> | <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">Plugin <span class="string">&#x27;xuyuanp/nerdtree-git-plugin&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeGitStatusIndicatorMapCustom</span> = &#123;</span><br><span class="line">                \ <span class="string">&#x27;Modified&#x27;</span>  :<span class="string">&#x27;✹&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Staged&#x27;</span>    :<span class="string">&#x27;✚&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Untracked&#x27;</span> :<span class="string">&#x27;✭&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Renamed&#x27;</span>   :<span class="string">&#x27;➜&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Unmerged&#x27;</span>  :<span class="string">&#x27;═&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Deleted&#x27;</span>   :<span class="string">&#x27;✖&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Dirty&#x27;</span>     :<span class="string">&#x27;✗&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Ignored&#x27;</span>   :<span class="string">&#x27;☒&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Clean&#x27;</span>     :<span class="string">&#x27;✔︎&#x27;</span>,</span><br><span class="line">                \ <span class="string">&#x27;Unknown&#x27;</span>   :<span class="string">&#x27;?&#x27;</span>,</span><br><span class="line">                \ &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeGitStatusUseNerdFonts</span> = <span class="number">1</span> <span class="comment">&quot; you should install nerdfonts by yourself. default: 0</span></span><br><span class="line">Plugin <span class="string">&#x27;tiagofumo/vim-nerdtree-syntax-highlight&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;ryanoasis/vim-devicons&#x27;</span></span><br><span class="line"><span class="comment">&quot; loading the plugin</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding the flags to NERDTree</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_nerdtree</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding the custom source to unite</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_unite</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding the column to vimfiler</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_vimfiler</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding to vim-airline&#x27;s tabline</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_airline_tabline</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding to vim-airline&#x27;s statusline</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_airline_statusline</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; ctrlp glyphs</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_ctrlp</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding to vim-startify screen</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_startify</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; adding to flagship&#x27;s statusline</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:webdevicons_enable_flagship_statusline</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:WebDevIconsOS</span> = <span class="string">&#x27;Darwin&#x27;</span></span><br><span class="line"></span><br><span class="line">Plugin <span class="string">&#x27;morhetz/gruvbox&#x27;</span></span><br><span class="line"><span class="comment">&quot; plugin from http://vim-scripts.org/vim/scripts.html</span></span><br><span class="line">Plugin <span class="string">&#x27;l9&#x27;</span></span><br><span class="line"><span class="comment">&quot; git plugin not hosted on github</span></span><br><span class="line"><span class="comment">&quot; plugin &#x27;git://git.wincent.com/command-t.git&#x27;</span></span><br><span class="line"><span class="comment">&quot; git repos on your local machine (i.e. when working on your own plugin)</span></span><br><span class="line"><span class="comment">&quot; plugin &#x27;file:///home/gmarik/path/to/plugin&#x27;</span></span><br><span class="line"><span class="comment">&quot; the sparkup vim script is in a subdirectory of this repo called vim.</span></span><br><span class="line"><span class="comment">&quot; pass the path to set the runtimepath properly.</span></span><br><span class="line"><span class="comment">&quot; plugin &#x27;rstacruz/sparkup&#x27;, &#123;&#x27;rtp&#x27;: &#x27;vim/&#x27;&#125;</span></span><br><span class="line"><span class="comment">&quot; avoid a name conflict with l9</span></span><br><span class="line"><span class="comment">&quot; plugin &#x27;user/l9&#x27;, &#123;&#x27;name&#x27;: &#x27;newl9&#x27;&#125;</span></span><br><span class="line"><span class="comment">&quot; all of your plugins must be added before the following line</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;F4&gt;</span> :!ctags -R<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> Tlist_Auto_Open = <span class="number">1</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;F2&gt;</span> :TlistToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;let Tlist_Use_Left_Windo =1             &quot;</span>在左侧窗口中显示<span class="built_in">taglist</span>窗</span><br><span class="line">Plugin <span class="string">&#x27;Yggdroot/LeaderF&#x27;</span></span><br><span class="line"><span class="comment">&quot;MatchTagAlways</span></span><br><span class="line">Plugin <span class="string">&#x27;Valloric/MatchTagAlways&#x27;</span></span><br><span class="line"><span class="comment">&quot;Markdown语法高亮</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;plasticboy/vim-markdown&#x27;</span></span><br><span class="line"><span class="comment">&quot;markdown实时显示</span></span><br><span class="line">Plugin <span class="string">&#x27;suan/vim-instant-markdown&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;indentLine 代码缩进线标志线</span></span><br><span class="line">Plugin <span class="string">&#x27;Yggdroot/indentLine&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_char</span> = <span class="string">&#x27;┆&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_color_term</span> = <span class="number">239</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:indentLine_enabled</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;autocmd VimEnter * nested:IndentLinesToggle</span></span><br><span class="line"><span class="comment">&quot;delimitMate 自动补全引号(单引号/双引号/反引号), 括号(()[]&#123;&#125;)</span></span><br><span class="line">Plugin <span class="string">&#x27;Raimondi/delimitMate&#x27;</span></span><br><span class="line"></span><br><span class="line">Plugin <span class="string">&#x27;scrooloose/syntastic&#x27;</span></span><br><span class="line"><span class="comment">&quot; Syntastic ------------------------------</span></span><br><span class="line"><span class="comment">&quot; show list of errors and warnings on the current file</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F6&gt;</span> :Errors<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot; turn to next or previous errors, after open errors list</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F7&gt;</span> :<span class="keyword">lnext</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F8&gt;</span> :<span class="keyword">lprevious</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot; check also when just opened the file</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_check_on_open</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">&quot; syntastic checker for javascript.</span></span><br><span class="line"><span class="comment">&quot; eslint is the only tool support JSX.</span></span><br><span class="line"><span class="comment">&quot; If you don&#x27;t need write JSX, you can use jshint.</span></span><br><span class="line"><span class="comment">&quot; And eslint is slow, but not a hindrance</span></span><br><span class="line"><span class="comment">&quot; let g:syntastic_javascript_checkers = [&#x27;jshint&#x27;]</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_javascript_checkers</span> = [<span class="string">&#x27;eslint&#x27;</span>]</span><br><span class="line"><span class="comment">&quot; don&#x27;t put icons on the sign column (it hides the vcs status icons of signify)</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_enable_signs</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">&quot; custom icons (enable them if you use a patched font, and enable the previous </span></span><br><span class="line"><span class="comment">&quot; setting)</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_error_symbol</span> = <span class="string">&#x27;✗&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_warning_symbol</span> = <span class="string">&#x27;⚠&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_style_error_symbol</span> = <span class="string">&#x27;✗&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_style_warning_symbol</span> = <span class="string">&#x27;⚠&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> vundle#end()            <span class="comment">&quot; required</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span>    <span class="comment">&quot; required</span></span><br><span class="line"><span class="comment">&quot; to ignore plugin indent changes, instead use:</span></span><br><span class="line"><span class="comment">&quot;filetype plugin on</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"><span class="comment">&quot; brief help</span></span><br><span class="line"><span class="comment">&quot; :pluginlist          - list configured plugins</span></span><br><span class="line"><span class="comment">&quot; :plugininstall(!)    - install (update) plugins</span></span><br><span class="line"><span class="comment">&quot; :pluginsearch(!) foo - search (or refresh cache first) for foo</span></span><br><span class="line"><span class="comment">&quot; :pluginclean(!)      - confirm (or auto-approve) removal of unused plugins</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"><span class="comment">&quot; see :h vundle for more details or wiki for faq</span></span><br><span class="line"><span class="comment">&quot; put your non-plugin stuff after this line</span></span><br><span class="line">“ <span class="keyword">nnoremap</span>能将一个组合快捷键映射为另一个快捷键。<span class="keyword">no</span>部分，指的是Vim的正常模式（Normal Mode）</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>n :NERDTreeFocus<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-n&gt;</span> :NERDTree<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-t&gt;</span> :NERDTreeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-f&gt;</span> :NERDTreeFind<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">set</span> guifont=<span class="symbol">&lt;FONT_NAME&gt;</span>:h<span class="symbol">&lt;FONT_SIZE&gt;</span></span><br><span class="line"><span class="keyword">set</span> guifont=DroidSansMono\ Nerd\ Fon<span class="variable">t:h11</span></span><br><span class="line"><span class="comment">&quot; or:</span></span><br><span class="line"><span class="keyword">set</span> guifont=DroidSansMono_Nerd_Fon<span class="variable">t:h11</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="tmux-终端复用器"><a href="#tmux-终端复用器" class="headerlink" title="tmux - 终端复用器"></a>tmux - 终端复用器</h1><p>全称：<code>terminal multiplexer</code><br>用于一个窗口操作多个会话的工具</p><p>安装：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tmux</span><br></pre></td></tr></table></figure><p>安装后，可以输入session，来创建窗口 并进入<code>tmux</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmux new -s &lt;session-name&gt;</span><br></pre></td></tr></table></figure><p>配置文件：<code>~/.tmux.conf</code><br><code>ctrl+b</code> 是在<code>tmux</code>操作的</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在tmux中时，退出(detach)，同时按住ctrl和b，松开再按d。</span></span><br><span class="line">ctrl+b d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新进入tmux， 控制台输入</span></span><br><span class="line"><span class="comment">#target-session是你要进入的tmux session</span></span><br><span class="line">tmux attach -t &lt;target-session&gt;</span><br><span class="line"><span class="comment">#简写：</span></span><br><span class="line">tmux a -t &lt;target-session&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在控制台界面下，使用命令tmux ls来获取target-session</span></span><br><span class="line">tmux ls</span><br><span class="line"><span class="comment"># 进入target-session为20的窗口：</span></span><br><span class="line">tmux attach -t 20 </span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">tmux a -t 20</span><br><span class="line"><span class="comment"># 进入tmux之后会得到很多sessions, </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#会话切换</span></span><br><span class="line"><span class="comment">#在窗口间切换， session 中已经有了两个窗口</span></span><br><span class="line"><span class="comment">#切换到 0：bash 这个窗口，步骤如下：</span></span><br><span class="line"><span class="comment">#按 Ctrl-B 组合键，然后松开,按数字 0 键。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭session有如下方式：</span></span><br><span class="line"><span class="comment"># 在控制台界面，关闭所有sessions：</span></span><br><span class="line">tmux kill-server</span><br><span class="line"><span class="comment"># 在控制台界面，关闭指定session：</span></span><br><span class="line">tmux kill-session -t &lt;target-session&gt;</span><br></pre></td></tr></table></figure><p>注意：如果这时输入tmux，会默认重新开启一个新的session。</p><p>在session里时，Ctrl + b + $ 对当前session进行重命名。</p><p>在terminal里，可直接对某个特定session重命名：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmux rename-session -t [session_old_name] [session_new_name]</span><br></pre></td></tr></table></figure><p>Ctrl + b + s 可视化选择任意session，同时，按下左右键可以对当前session的windows进行展开和收起，以及对某个windows的panes进行展开并选择某一pane。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;macvim-和-tmux-安装&quot;&gt;&lt;a href=&quot;#macvim-和-tmux-安装&quot; class=&quot;headerlink&quot; title=&quot;macvim 和 tmux 安装&quot;&gt;&lt;/a&gt;macvim 和 tmux 安装&lt;/h1&gt;</summary>
    
    
    
    
    <category term="vim" scheme="http://yoursite.com/tags/vim/"/>
    
    <category term="tmux" scheme="http://yoursite.com/tags/tmux/"/>
    
  </entry>
  
  <entry>
    <title>uniapp 音乐播放器功能</title>
    <link href="http://yoursite.com/2022/09/25/VUE2-app-%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2022/09/25/VUE2-app-%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8%E5%8A%9F%E8%83%BD/</id>
    <published>2022-09-25T02:10:51.000Z</published>
    <updated>2023-09-03T01:49:52.382Z</updated>
    
    <content type="html"><![CDATA[<h1 id="uniapp-移动端的音乐播放器"><a href="#uniapp-移动端的音乐播放器" class="headerlink" title="uniapp 移动端的音乐播放器"></a>uniapp 移动端的音乐播放器</h1><h2 id="写的原因"><a href="#写的原因" class="headerlink" title="写的原因"></a>写的原因</h2><blockquote><p>这个<code>app</code>从4月份开始，做了一个星期，但中间有3个月没碰，8月末又重新拿了起来，但由于<code>uniapp</code>的多次更新，导致<code>app</code>出了问题，而且本人是刚学的vue2，3个月没碰，有些遗忘，需要重新学习才行，同时这个<code>app</code>遇到的问题有些难以处理。<br>因此我想先整理出我一开始做出来的功能，以便后期如果需要重新开始，则可以把我想要的功能重新添加进去。</p></blockquote><span id="more"></span><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>**<em>要点</em>**：点击播放键可以播放音乐，切换画面后，音乐不会停止，然后在旁边出现一个mini的音乐播放器，可以随时退出。<br>（我并没有使用一些已经写好的player,只要是因为并不符合我所需要的要求，即只需要背景音乐可以停止和继续的功能就行）<br>1、需要做一个<code>mini</code>版的音乐播放器,放在页面的左边，在播放期间可以随时播放和停止。<br>2、由于没有页面和退出也能听到音乐，所以必须使用全局变量。 我使用了<code>vuex</code>来控制这些变量。<br>3、如何把上面两点写进<code>app</code>中。</p><h3 id="1、播放器样式"><a href="#1、播放器样式" class="headerlink" title="1、播放器样式"></a>1、播放器样式</h3><h4 id="注：原本想要找到我之前参考的博客，可以说这个播放器，基本上使用了那名作者的功能，当然为了结合自身app，对他写功能也进行了修改，但时隔3个多月，我已经找不到该网站了，如果该作者看到这个是你写的功能，可以和我邮件联系，我会标注"><a href="#注：原本想要找到我之前参考的博客，可以说这个播放器，基本上使用了那名作者的功能，当然为了结合自身app，对他写功能也进行了修改，但时隔3个多月，我已经找不到该网站了，如果该作者看到这个是你写的功能，可以和我邮件联系，我会标注" class="headerlink" title="(注：原本想要找到我之前参考的博客，可以说这个播放器，基本上使用了那名作者的功能，当然为了结合自身app，对他写功能也进行了修改，但时隔3个多月，我已经找不到该网站了，如果该作者看到这个是你写的功能，可以和我邮件联系，我会标注)"></a>(<strong><em>注：原本想要找到我之前参考的博客，可以说这个播放器，基本上使用了那名作者的功能，当然为了结合自身app，对他写功能也进行了修改，但时隔3个多月，我已经找不到该网站了，如果该作者看到这个是你写的功能，可以和我邮件联系，我会标注</em></strong>)</h4><p>页面的样式我需要做成mini型，放在各个<code>page</code>中，而不是放在最下面，因为我不是<code>音乐app</code>,所以只需要在播放期间可以停止。<br>因此我添加一个<code>component</code>,命名为<code>playermin.vue</code>,并把播放器的样式结构添加进去。</p><blockquote><p>tip<br>由于本人对<code>css</code>只是半吊子桶水的实力，因此这里的结构样式是直接使用了网上的播放器样式，只是对里面的功能进行了删减和添加</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;player-min&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;[!isOpen?&#x27;open&#x27;:&#x27;&#x27;]&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;(isplayactive &amp;&amp; require)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;[isplayingmusic ? &#x27;&#x27;:&#x27;stoped&#x27;]&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;playdetail.pic&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">@<span class="attr">click</span>=<span class="string">&quot;isOpen=!isOpen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btns&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isOpen&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">v-if</span>=<span class="string">&quot;!isplayingmusic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item cuIcon-playfill&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;play&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">v-if</span>=<span class="string">&quot;isplayingmusic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item cuIcon-stop&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;pause&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item cuIcon-close&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;close&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;text class=&quot;item cuIcon-repeal&quot; @click=&quot;toPlayPage&quot;&gt;&lt;/text&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="comment">//引入在vuex中的全局变量，用来控制播放器，具体变量的用途，看下面vuex中的内容</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="javascript">mapGetters,</span></span><br><span class="line"><span class="javascript">mapMutations</span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">require</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript">        <span class="comment">//挂载的时候输出传入的参数，用来debug</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">this</span>.require)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">isOpen</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript">        <span class="comment">//项目中使用了多模块方式书写vuex</span></span></span><br><span class="line"><span class="javascript"><span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapGetters(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;isplayingmusic&#x27;</span>, <span class="string">&#x27;playdetail&#x27;</span>, <span class="string">&#x27;isplayactive&#x27;</span>, <span class="string">&#x27;bgAudioManager&#x27;</span>])</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapMutations(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;setIsplayingmusic&#x27;</span>, <span class="string">&#x27;setPlaydetail&#x27;</span>, <span class="string">&#x27;setIsplayactive&#x27;</span>, <span class="string">&#x27;playAudio&#x27;</span>, <span class="string">&#x27;pauseAudio&#x27;</span>, <span class="string">&#x27;stopAudio&#x27;</span>]),</span></span><br><span class="line"><span class="javascript">            <span class="comment">//下面三个方法，对应三个按钮，分别是播放、暂停、关闭mini播放器</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">play</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.playAudio()</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">pause</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.pauseAudio();</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">close</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">// this.bgAudioManager.stop()</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.stopAudio()</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//这个是原作者写的打开播放列表，但我这边暂时是不需要的，所以我还没有验证过下面这段功能实际展示的效果</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// toPlayPage() &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// const list = this.audiolist;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// uni.navigateTo(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// url: &#x27;/pages/palyer/palyer?id=&#x27; + this.playdetail.id + &#x27;&amp;index=&#x27; + &quot;none&quot; + &#x27;&amp;list=&#x27; +</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// encodeURIComponent(JSON.stringify(list))</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 下面的样式是我直接拷贝网上别人写的，本人对scss不是很熟 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.player-min</span> &#123;</span></span><br><span class="line"><span class="css">// <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css"><span class="attribute">bottom</span>: <span class="number">40%</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">z-index</span>: <span class="number">1002</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css"><span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css"><span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">50</span>rpx <span class="number">15</span>rpx <span class="number">15</span>rpx <span class="number">50</span>rpx;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&amp;<span class="selector-class">.open</span> &#123;</span></span><br><span class="line"><span class="css">// <span class="attribute">border-radius</span>: <span class="number">45</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.img</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">width</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&amp;<span class="selector-class">.stoped</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">animation-play-state</span>: paused;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="attribute">animation</span>: rotate <span class="number">10s</span> linear .<span class="number">1s</span> infinite;</span></span><br><span class="line"><span class="css">// <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.btns</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">48</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">color</span>: <span class="number">#F0F0F0</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">transition</span>: width <span class="number">2.5s</span> linear;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">margin</span>: <span class="number">0</span> <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.cuIcon-playfill</span> &#123;</span></span><br><span class="line"><span class="css">// <span class="attribute">margin-left</span>: <span class="number">12</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="keyword">@keyframes</span> rotate &#123;</span></span><br><span class="line"><span class="css"><span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="VUEX"><a href="#VUEX" class="headerlink" title="VUEX"></a>VUEX</h2><p><code>vuex</code>的部分，我使用了多模块的方式。<br>在<code>store</code>中，添加一个文件夹<code>modules</code>, 在里面添加<code>music.js</code>,然后<code>store/index.js</code>中添加引用<br>** <code>index.js</code>**</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vuexMusic <span class="keyword">from</span> <span class="string">&#x27;@/store/modules/music.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line"><span class="attr">modules</span>: &#123;</span><br><span class="line">vuexMusic</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">strict</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>** <code>music.js</code>**</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//公共变量</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line"><span class="comment">//是否正在播放 (默认false)</span></span><br><span class="line"><span class="attr">isplayingmusic</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//是否打开mini播放器 (默认false)</span></span><br><span class="line"><span class="attr">isplayactive</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//当前播放的歌曲</span></span><br><span class="line"><span class="attr">playdetail</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="comment">//播放歌曲列表</span></span><br><span class="line"><span class="attr">audiolist</span>: [],</span><br><span class="line"><span class="comment">//播放器 （在mutations中进行初始化）</span></span><br><span class="line"><span class="attr">bgAudioManager</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="comment">//定时时间,用于背景音频播放进度更新事件目前没用）</span></span><br><span class="line"><span class="attr">timer</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取变量</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line"><span class="function"><span class="title">isplayingmusic</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.isplayingmusic</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">isplayactive</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.isplayactive</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">playdetail</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.playdetail;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">audiolist</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.audiolist</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">bgAudioManager</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.bgAudioManager</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">timer</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.timer</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//mutation 直接修改state中的属性</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line"><span class="function"><span class="title">setIsplayingmusic</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.isplayingmusic = param</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">setIsplayactive</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.isplayactive = param</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">setPlaydetail</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.playdetail = param</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">setAudiolist</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.audiolist = param</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//播放器初始化</span></span><br><span class="line"><span class="function"><span class="title">setInitBgAudioManager</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line"><span class="comment">//音乐播放器</span></span><br><span class="line"><span class="keyword">let</span> audioPlayer = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// #ifdef H5</span></span><br><span class="line">audioPlayer = uni.createInnerAudioContext() <span class="comment">//H5 则注册一个音乐组件</span></span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line"><span class="comment">// #ifdef APP-PLUS</span></span><br><span class="line">audioPlayer = uni.getBackgroundAudioManager() <span class="comment">//app,则注册一个背景音乐组件，当切后台后仍会播放音乐</span></span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line">state.bgAudioManager = audioPlayer</span><br><span class="line">state.bgAudioManager.onPlay(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;playing&#x27;</span>)</span><br><span class="line">Vue.prototype.cusPlay &amp;&amp; Vue.prototype.cusPlay()</span><br><span class="line"><span class="built_in">clearInterval</span>(state.timer)</span><br><span class="line"><span class="built_in">console</span>.log(Vue.$store)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line"><span class="built_in">this</span>.commit(<span class="string">&#x27;vuexMusic/setTimer&#x27;</span>, param)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Vue.prototype.$bgAudioManager.onTimeUpdate(()=&gt;&#123;</span></span><br><span class="line"><span class="comment">// console.log(&#x27;update&#x27;)</span></span><br><span class="line"><span class="comment">// Vue.prototype.cusTimeUpdate &amp;&amp; Vue.prototype.cusTimeUpdate()</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line">state.bgAudioManager.onEnded(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">Vue.prototype.cusEnded &amp;&amp; Vue.prototype.cusEnded()</span><br><span class="line"><span class="built_in">clearInterval</span>(state.timer)</span><br><span class="line">&#125;)</span><br><span class="line">state.bgAudioManager.onError(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;play err:&#x27;</span> + err)</span><br><span class="line"><span class="built_in">this</span>.commit(<span class="string">&#x27;vuexMusic/setIsplayactive&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">clearInterval</span>(state.timer)</span><br><span class="line">&#125;)</span><br><span class="line">state.bgAudioManager.onStop(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;play stop:&#x27;</span> + res)</span><br><span class="line"><span class="built_in">this</span>.commit(<span class="string">&#x27;vuexMusic/setIsplayactive&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">clearInterval</span>(state.timer)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//播放器歌曲相关参数赋值</span></span><br><span class="line"><span class="function"><span class="title">setBgAudioManager</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.bgAudioManager.url = param.song;</span><br><span class="line">state.bgAudioManager.title = param.song_name;</span><br><span class="line">state.bgAudioManager.coverImgUrl = param.song_cover;</span><br><span class="line">state.bgAudioManager.singer = param.singer;</span><br><span class="line"><span class="comment">//h5</span></span><br><span class="line">state.bgAudioManager.autoplay = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//app</span></span><br><span class="line">state.bgAudioManager.src = param.song;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">setTimer</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">//安卓和ios app 下onTimeUpdate事件在替换资源和seek之后不会触发，这里做手动触发</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;update&#x27;</span>)</span><br><span class="line">Vue.prototype.cusTimeUpdate()</span><br><span class="line">&#125;, <span class="number">200</span>)</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">//播放歌曲</span></span><br><span class="line"><span class="function"><span class="title">playAudio</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line"><span class="keyword">let</span> playPromise = state.bgAudioManager.play()</span><br><span class="line">        <span class="comment">//如果没有存在，则播放</span></span><br><span class="line"><span class="keyword">if</span> (playPromise !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">playPromise.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">state.bgAudioManager.play()</span><br><span class="line">&#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// state.bgAudioManager.play()</span></span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">//暂停歌曲</span></span><br><span class="line"><span class="function"><span class="title">pauseAudio</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.bgAudioManager.pause()</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">//关闭歌曲</span></span><br><span class="line"><span class="function"><span class="title">stopAudio</span>(<span class="params">state, param</span>)</span> &#123;</span><br><span class="line">state.bgAudioManager.stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line"><span class="function"><span class="title">isplayingmusicAction</span>(<span class="params">context, param</span>)</span> &#123;</span><br><span class="line"><span class="comment">//调用mutations中的方法，来修改state中的</span></span><br><span class="line">context.commit(<span class="string">&#x27;setIsplayingmusic&#x27;</span>, param)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">state,</span><br><span class="line">mutations,</span><br><span class="line">getters,</span><br><span class="line">actions</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="在项目中使用该功能"><a href="#在项目中使用该功能" class="headerlink" title="在项目中使用该功能"></a>在项目中使用该功能</h2><p>页面注册，pages.json,App.vue,music-list<br>** <code>App.vue</code> ** </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    mapMutations,</span><br><span class="line">    mapGetters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">onLaunch</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//音乐播放器 注册事件函数写在vuex中</span></span><br><span class="line">        <span class="built_in">this</span>.setInitBgAudioManager()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        ...mapMutations(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;setInitBgAudioManager&#x27;</span>])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong><code>music-detail.vue</code></strong> 这个文件是音乐列表文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cu-custom</span> <span class="attr">:isBack</span>=<span class="string">&quot;true&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;bg-gradual-pink shadow-blur&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">slot</span>=<span class="string">&quot;content&quot;</span>&gt;</span>作品<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">cu-custom</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-content&quot;</span> @<span class="attr">scroll</span>=<span class="string">&quot;scrollpage&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;top:customBar*2+&#x27;rpx&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uni-card</span> <span class="attr">:is-shadow</span>=<span class="string">&quot;false&quot;</span> <span class="attr">is-full</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;album-top&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;album-con&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-box&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;img-info&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;bgimg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;album-bot flex-box&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>&#123;&#123; albumMsg.album &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">uni-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uni-section</span> <span class="attr">overflow</span> <span class="attr">title</span>=<span class="string">&quot;歌曲&quot;</span> <span class="attr">type</span>=<span class="string">&quot;line&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;uni-card &gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mu-list</span> <span class="attr">:list</span>=<span class="string">&quot;targetMuList&quot;</span> <span class="attr">:isNav</span>=<span class="string">&quot;false&quot;</span> <span class="attr">:cover</span>=<span class="string">&quot;bgimg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mu-list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;/uni-card&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">uni-section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="comment">// 防抖</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, wait = <span class="number">10</span></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> timeout = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (timeout !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(timeout);</span></span><br><span class="line"><span class="javascript">timeout = <span class="built_in">setTimeout</span>(fn, wait);</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> that = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> muList <span class="keyword">from</span> <span class="string">&#x27;@/components/musiclist.vue&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="javascript">mapGetters,</span></span><br><span class="line"><span class="javascript">mapMutations</span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> db = uniCloud.database()</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">//专辑信息</span></span></span><br><span class="line"><span class="javascript"><span class="attr">albumMsg</span>: [],</span></span><br><span class="line"><span class="javascript"><span class="comment">//专辑封面</span></span></span><br><span class="line"><span class="javascript"><span class="attr">bgimg</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">playList</span>: [],</span></span><br><span class="line"><span class="javascript"><span class="attr">scrollTop</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">scrollY</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">targetMuList</span>: &#123;&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">lyric</span>: []</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">muList</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapGetters(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;audiolist&#x27;</span>, <span class="string">&#x27;playdetail&#x27;</span>, <span class="string">&#x27;bgAudioManager&#x27;</span>]),</span></span><br><span class="line"><span class="javascript"><span class="comment">//歌曲列表，通过专辑信息，实时计算出来</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">targetMuLis</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (!<span class="built_in">this</span>.albumMsg.album) <span class="keyword">return</span> [];</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> par = &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">album_id</span>: <span class="built_in">this</span>.albumMsg._id</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> t = <span class="built_in">this</span>.album.tracks.slice(<span class="number">0</span>, <span class="number">25</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> t.map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">id</span>: val.id,</span></span><br><span class="line"><span class="javascript"><span class="attr">name</span>: val.name,</span></span><br><span class="line"><span class="javascript"><span class="attr">picUrl</span>: val.al.picUrl,</span></span><br><span class="line"><span class="javascript"><span class="attr">n1</span>: val.ar[<span class="number">0</span>].name,</span></span><br><span class="line"><span class="javascript"><span class="attr">n2</span>: val.al.name</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">customBar</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> <span class="built_in">this</span>.CustomBar</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">that = <span class="built_in">this</span></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">onLoad</span>(<span class="params">options</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">//页面加载的时候，进行数据加载</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.getData(options.item);</span></span><br><span class="line"><span class="javascript"><span class="comment">//初始化播放器参数</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.initPlay()</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapMutations(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;setPlaydetail&#x27;</span>, <span class="string">&#x27;setIsplayingmusic&#x27;</span>, <span class="string">&#x27;setIsplayactive&#x27;</span>, <span class="string">&#x27;setBgAudioManager&#x27;</span>]),</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">getData</span>(<span class="params">id</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> par = &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">_id</span>: id</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript">db.collection(<span class="string">&#x27;music-album&#x27;</span>)</span></span><br><span class="line"><span class="javascript">.where(par).get()</span></span><br><span class="line"><span class="javascript">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&quot;music-album&quot;</span>, res.result.data[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.albumMsg = res.result.data[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.bgimg = <span class="built_in">this</span>.albumMsg.album_cover</span></span><br><span class="line"><span class="javascript">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(err)</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript">par = &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">album_id</span>: id</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript">db.collection(<span class="string">&#x27;music-list&#x27;</span>)</span></span><br><span class="line"><span class="javascript">.where(par)</span></span><br><span class="line"><span class="javascript">.get()</span></span><br><span class="line"><span class="javascript">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&quot;music-list&quot;</span>, res.result.data)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.targetMuList = res.result.data</span></span><br><span class="line"><span class="javascript"><span class="comment">// this.setAudiolist(this.targetMuList)</span></span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript">.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&quot;music-list&quot;</span>, err)</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">scrollpage</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.scrollY = e.detail.scrollTop</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.scroll()</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="comment">// 设置背景条</span></span></span><br><span class="line"><span class="javascript"><span class="attr">scroll</span>: debounce(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (that.scrollY &lt; <span class="number">5</span>) &#123;</span></span><br><span class="line"><span class="javascript">that.scrollTop = <span class="number">20</span></span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (that.scrollY &lt; <span class="number">300</span>) &#123;</span></span><br><span class="line"><span class="javascript">that.scrollTop = -<span class="built_in">parseInt</span>(that.scrollY) + <span class="number">20</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;),</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">goBack</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 返回上一页</span></span></span><br><span class="line"><span class="javascript">uni.navigateBack();</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">initPlay</span>(<span class="params">id, index</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">// if (index) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// this.curPlayIndex = index</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">Vue.prototype.cusPlay = <span class="built_in">this</span>.onPlayFn</span></span><br><span class="line"><span class="javascript">Vue.prototype.cusTimeUpdate = <span class="built_in">this</span>.onTimeUpdateFn</span></span><br><span class="line"><span class="javascript">Vue.prototype.cusEnded = <span class="built_in">this</span>.onEndedFn</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">playNextOrPrevSong</span>(<span class="params">id</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&#x27;#playNextOrPrevSong 歌曲ID：&#x27;</span>, id)</span></span><br><span class="line"><span class="javascript"><span class="comment">//for循环对比，获取当前的</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.audiolist.length; i++) &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> item = <span class="built_in">this</span>.audiolist[i]</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (id == item._id) &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setBgAudioManager(item)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setPlaydetail(&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">id</span>: item._id,</span></span><br><span class="line"><span class="javascript"><span class="attr">pic</span>: item.song_cover</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript"><span class="keyword">break</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">onPlayFn</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&quot;#onPlayFn&quot;</span>)</span></span><br><span class="line"><span class="javascript"><span class="comment">// this.playTime = this.song.time;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// this.isPlay = true</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayactive(<span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&#x27;onplaying&#x27;</span>)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">onTimeUpdateFn</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">// console.log(&quot;#onTimeUpdateFn&quot;, this.$bgAudioManager.currentTime)</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> curtime = <span class="built_in">this</span>.bgAudioManager.currentTime</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.curPlayTime = <span class="built_in">Math</span>.floor(curtime);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">onEndedFn</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&#x27;ended&#x27;</span>)</span></span><br><span class="line"><span class="javascript"><span class="comment">// this.isPlay = false;</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayactive(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.next(<span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">next</span>(<span class="params">isAuto</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> index = <span class="built_in">this</span>.getIndex(<span class="string">&#x27;next&#x27;</span>, isAuto)</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(index)</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">this</span>.audiolist)</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="built_in">this</span>.audiolist[index])</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.playNextOrPrevSong(<span class="built_in">this</span>.audiolist[index]._id)</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">getIndex</span>(<span class="params">type, isAuto</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">//[&#x27;0列表循环&#x27;, &#x27;1随机播放&#x27;, &#x27;2单曲循环&#x27;]</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> next = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> prev = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript"><span class="comment">//获取当前播放列表</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> last = <span class="built_in">this</span>.audiolist.length - <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> cur = <span class="number">0</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//获取当前正在播放的歌曲</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.playdetail</span></span><br><span class="line"><span class="javascript"><span class="comment">//for循环对比，获取当前的</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.audiolist.length; i++) &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> audioCur = <span class="built_in">this</span>.audiolist[i]</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (<span class="built_in">this</span>.playdetail.id == audioCur._id) &#123;</span></span><br><span class="line"><span class="javascript">cur = i</span></span><br><span class="line"><span class="javascript"><span class="keyword">break</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">next = cur == last ? <span class="number">0</span> : cur + <span class="number">1</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//判断是上一首还是下一首</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> type == <span class="string">&#x27;next&#x27;</span> ? next : prev</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">$bgheight: 520rpx;</span><br><span class="line">$bgtop: -44px;</span><br><span class="line"></span><br><span class="line">.container &#123;</span><br><span class="line">overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.nav-bar &#123;</span><br><span class="line">position: relative;</span><br><span class="line">background-position: 0 0px;</span><br><span class="line">background-repeat: no-repeat;</span><br><span class="line">background-size: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bg &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">top: 0;</span><br><span class="line">left: 0;</span><br><span class="line">height: 100%;</span><br><span class="line">width: 100%;</span><br><span class="line">filter: blur(35px);</span><br><span class="line">background-position: 0 0px;</span><br><span class="line">background-repeat: no-repeat;</span><br><span class="line">background-size: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bg1 &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">top: 0;</span><br><span class="line">left: 0;</span><br><span class="line">height: 100%;</span><br><span class="line">width: 100%;</span><br><span class="line">background: rgba(0, 0, 0, 0.2);</span><br><span class="line">z-index: 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.page-content &#123;</span><br><span class="line">position: fixed;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.album-top &#123;</span><br><span class="line">position: relative;</span><br><span class="line">top: $bgtop;</span><br><span class="line">height: $bgheight;</span><br><span class="line">padding-top: 44px;</span><br><span class="line">overflow: hidden;</span><br><span class="line">background: #fff;</span><br><span class="line"></span><br><span class="line">.bg &#123;</span><br><span class="line">background-size: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.album-con &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">width: 100%;</span><br><span class="line">padding: 46rpx 24rpx 0 30rpx;</span><br><span class="line">// padding: 46rpx 0 0 0 ;</span><br><span class="line">z-index: 10;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.album-bot &#123;</span><br><span class="line">padding-top: 42rpx;</span><br><span class="line">// color: #fff;</span><br><span class="line">text-align: center;</span><br><span class="line"></span><br><span class="line">.iconfont &#123;</span><br><span class="line">font-size: 44rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.txt &#123;</span><br><span class="line">font-size: x-large;</span><br><span class="line">color: #252621;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.img-info &#123;</span><br><span class="line">position: relative;</span><br><span class="line">// width: 390rpx;</span><br><span class="line">width: 280rpx;</span><br><span class="line">height: 280rpx;</span><br><span class="line">// margin-right: 40rpx;</span><br><span class="line">border-radius: 10rpx;</span><br><span class="line">overflow: hidden;</span><br><span class="line">margin: 0, auto;</span><br><span class="line"></span><br><span class="line">// background-image: url(&#x27;@/static/music/vinyl_03.png&#x27;);</span><br><span class="line">// background-size: cover;</span><br><span class="line">// background-repeat: no-repeat;</span><br><span class="line">&amp;:before &#123;</span><br><span class="line">content: &#x27; &#x27;;</span><br><span class="line">position: absolute;</span><br><span class="line">left: 0;</span><br><span class="line">top: 0;</span><br><span class="line">width: 100%;</span><br><span class="line">height: 40rpx;</span><br><span class="line">z-index: 2;</span><br><span class="line">background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.2), transparent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.img &#123;</span><br><span class="line">width: 280rpx;</span><br><span class="line">height: 280rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.count &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">top: 0;</span><br><span class="line">right: 0;</span><br><span class="line">padding-left: 25rpx;</span><br><span class="line">line-height: 34rpx;</span><br><span class="line">color: #fff;</span><br><span class="line">font-size: 24rpx;</span><br><span class="line">z-index: 10;</span><br><span class="line">background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAN3RSTlMA9wcC+/3w4A/RoQv0m4s6IBkU7eeRK73kxaZtW+rc1cmxe3UmwbiWQNmqgWZUzUY1ME4dhmGuJ2Z0kQAABVtJREFUeNrtnYtWGkEQRFsEeSmgII8EVBASUFHx1f//ZwmJRwaZYhndjdU5c//gQp8DVTvTK5FIJBKJRCKRSCQSiUQikcj/yWI6vRfzNEYz/U23NhbLlF70jZ7hr+W+pQ6FoxOxyXhP12neiEVyZd3gdiH2uFYfP0tijP2mehk8iy3miui1xRLfFHNaFTv0dAutvpihq1uZmPmp1yRqRuZLVxyol+5cLOB+9nMwZ52G8OOKSLWWVx97TzlhZ01EZDxRL8UHIcf92ZAl/ZZ6+UE+XxsiUjoF8zWinq9NEZH2BZivO+HFJyLyPFAvL4/Cil9ESkcF9XFIO19ARGRRVi9ndaHEDVPvksp38FP/7VgIQSJLTirq5fByX+jAIkvq5+rlnG++tovI/uWheqmwlUZAZMXxlXo5+M41X0DEZXqmXspUpaSuOBJAbrTq8GhLSSzi8jjUv/CWkusimLui/oa4lNxVRHLXYL5ISkmPCKLRYS4lPSIYFOovCEpJXVGRJGCoz59++XwBEci4R1pKIhFMv0VZegeL4FCfDyklGUSWoZ6vlAQiSTw32UpJN/lJMm6o5yolkUgy92WqUjJcxA31RKXkJ0RwqN+7TpwvLpFlqGcpJYNEQkL9MOtSEotcSRIo1DOU3kEigaH+bCoQShEY6vUKlpKcIjDU41IyS5EXSSY81M/q4oNXBIR6VHoTi4BQD0pJahEQ6kHpnZ3IUAIIDPWF96U3u8hGqEelJL/IWqjHpaQFERjqC0er0siECAj12c6Xm4ckRW6a20tJMyKvoR6WknZEcKgf9EXEkggO9b22LREY6pelpC0RHOq7fWMiONRPxlmJdCQLcKjPP1VtieBQX5wbE8GhvtOwJbIM9bCUtCWCQ33xzpgIDvWVXLoiE8macQck4YYxERjqy/vWRFCofzInItKeqIdxiiI9yRwc6msWRXyhfmBSxBfqFzZFNkP9g1UROVkP9TfpiVzIv6VRVodLqyLv/7D0jYps/IW8Nyni+VNfNSjii1kVSU/kVjIHB9+6ORF/FTEUYyKgHBqUjIlMZ+rjcCppipQlY47BOoNyQ0yJoEq7JmJJpH4Om1NLIieVAjzAbUgEPSjJn1YlA5FzyYj7Mn6eaEhkmTvQtRNLIjdNeBHIksjiFp+CyExkJmlT+lmA5wYsiTwP8PVFQyLti20XSs2IVE/zGZ+mwyJnkh79VsKlaxsi40niiUALIug44IF7BtiAyLyb7anZZJGipECjs9s5ZnKR3NPejifLuUUeimDBzeZUMYs0fgQ8SOcVAU/R0X2YLEW66ZXSyTfgSEUeh19+JxGIhJbSX39L1G00PlxKM9zbBSIhpTTHTWogElBKk9xt/5xIfUazAtXtZ8JLaaL9D64IX334L0Tq51w7LNySJqyUJttaA0QSp4pujxAWCS+lb9vydbiZeudSmnHXVrDITZNz+1mgyOKWdR8dEIGlNO2GwBCR5wHxzka36kgopXvUWzRdEapSOiORfot906ybTINL6RnHVHlEUCltYFtussi8++WrQtIQaXQIlreEinhLaYZ1OoEi+Z1L6R+EW9ehCC6lzyjfs4BElqU0zRKwQJHCeinNUB9+VgSX0rxvh/GJ5EagPnwifl+POryV0jT14WdEjq+I6sMPilCV0p8R2Zf6jKs+/KAIKqUH5FO1IXKght+NqCt4F3fvwtu3QL+qP4GybqFwZGKq/jBUTJnldQO78F1VbbxgJIHSHpgqivowhIp/qoiKnh05aZqfqlceiOvDMC51jRlb0bM79RZrfRhKqXb46lExOlVv5O5G19ejB/bQEYlEIpFIJBLJkF8r2nFUwcJuMQAAAABJRU5ErkJggg==) no-repeat;</span><br><span class="line">background-size: 25rpx 25rpx;</span><br><span class="line">transform: scale(0.8);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.info-con &#123;</span><br><span class="line">.title &#123;</span><br><span class="line">margin-bottom: 14rpx;</span><br><span class="line">// color: #fff;</span><br><span class="line">line-height: 46rpx;</span><br><span class="line">font-weight: 600;</span><br><span class="line">height: auto;</span><br><span class="line">/*高度自动*/</span><br><span class="line">display: inline-block;</span><br><span class="line">/*转为行内块元素*/</span><br><span class="line">white-space: pre-wrap;</span><br><span class="line">/*处理元素内的空白,保留空白符序列，但是正常地进行换行*/</span><br><span class="line">word-wrap: break-word;</span><br><span class="line">/*允许长单词或 URL 地址换行到下一行,在长单词或 URL 地址内部进行换行*/</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.avator-box &#123;</span><br><span class="line">margin-bottom: 26rpx;</span><br><span class="line">align-items: center;</span><br><span class="line">color: #ccc0ba;</span><br><span class="line">font-size: 25rpx;</span><br><span class="line"></span><br><span class="line">.avator &#123;</span><br><span class="line">width: 60rpx;</span><br><span class="line">height: 60rpx;</span><br><span class="line">margin-right: 12rpx;</span><br><span class="line">border-radius: 60rpx;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.desc-box &#123;</span><br><span class="line">align-items: center;</span><br><span class="line">line-height: 40rpx;</span><br><span class="line">color: #ccc0ba;</span><br><span class="line">font-size: 23rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.album-list &#123;</span><br><span class="line">position: relative;</span><br><span class="line">top: - 84px;</span><br><span class="line">background: #fff;</span><br><span class="line">border-radius: 36rpx 36rpx 0 0;</span><br><span class="line">z-index: 100;</span><br><span class="line"></span><br><span class="line">.title-bar &#123;</span><br><span class="line">padding: 10rpx;</span><br><span class="line">justify-content: space-between;</span><br><span class="line"></span><br><span class="line">.iconfont &#123;</span><br><span class="line">margin-left: 16rpx;</span><br><span class="line">margin-right: 16rpx;</span><br><span class="line">font-size: 40rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.play &#123;</span><br><span class="line">line-height: 80rpx;</span><br><span class="line">color: #252621;</span><br><span class="line">font-weight: 600;</span><br><span class="line">font-size: 32rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.collect &#123;</span><br><span class="line">width: 228rpx;</span><br><span class="line">height: 80rpx;</span><br><span class="line">text-align: center;</span><br><span class="line">line-height: 80rpx;</span><br><span class="line">border-radius: 80rpx;</span><br><span class="line">color: #fff;</span><br><span class="line">background: #fb2b21;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.item &#123;</span><br><span class="line">align-items: center;</span><br><span class="line">height: 120rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.con &#123;</span><br><span class="line">padding-right: 40rpx;</span><br><span class="line">align-items: center;</span><br><span class="line">justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.num &#123;</span><br><span class="line">width: 84rpx;</span><br><span class="line">text-align: center;</span><br><span class="line">line-height: 120rpx;</span><br><span class="line">color: #999;</span><br><span class="line">font-size: 24rpx;</span><br><span class="line"></span><br><span class="line">&amp;.on &#123;</span><br><span class="line">color: #ff3a3a;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tit &#123;</span><br><span class="line">margin-right: 20rpx;</span><br><span class="line">color: #333;</span><br><span class="line">line-height: 48rpx;</span><br><span class="line">font-size: 32rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.count &#123;</span><br><span class="line">margin-right: 20rpx;</span><br><span class="line">color: #ccc;</span><br><span class="line">line-height: 48rpx;</span><br><span class="line">font-size: 24rpx;</span><br><span class="line">transform: scale(0.84);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon &#123;</span><br><span class="line">width: 56rpx;</span><br><span class="line">height: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.desc &#123;</span><br><span class="line">// color: #999;</span><br><span class="line">color: #999999;</span><br><span class="line">font-size: 24rpx;</span><br><span class="line">line-height: 40rpx;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>musiclist.vue</code></strong> 这个文件是个组件，用在<code>music-detail.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;mulist&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isNav&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;l&quot;</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;r&quot;</span>&gt;</span>&#123;&#123;more&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(val,index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;flex-item index-item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 60rpx;&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;index+1&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;text ellipsis flex-box&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;name ellipsis&quot;</span>&gt;</span>&#123;&#123;val.song_name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;play-btn flex-item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;play(index, val)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;(playdetail.id==val._id &amp;&amp; isplayingmusic==true)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe76a;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe638;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="javascript">mapGetters,</span></span><br><span class="line"><span class="javascript">mapMutations</span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> update = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">// isPlay: false,</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">type</span>: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: <span class="string">&#x27;歌曲推荐&#x27;</span></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">more</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">type</span>: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: <span class="string">&#x27;更多推荐&#x27;</span></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">list</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="comment">// type:Array,</span></span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: []</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">isNav</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">cover</span>: &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">type</span>: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">default</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapGetters(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;audiolist&#x27;</span>, <span class="string">&#x27;playdetail&#x27;</span>, <span class="string">&#x27;isplayingmusic&#x27;</span>, <span class="string">&#x27;bgAudioManager&#x27;</span>])</span></span><br><span class="line"><span class="javascript">&#125;,</span></span><br><span class="line"><span class="javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">...mapMutations(<span class="string">&#x27;vuexMusic&#x27;</span>, [<span class="string">&#x27;setAudiolist&#x27;</span>, <span class="string">&#x27;setPlaydetail&#x27;</span>, <span class="string">&#x27;setIsplayingmusic&#x27;</span>, <span class="string">&#x27;setIsplayactive&#x27;</span>, <span class="string">&#x27;setBgAudioManager&#x27;</span>, <span class="string">&#x27;playAudio&#x27;</span>, <span class="string">&#x27;pauseAudio&#x27;</span>]),</span></span><br><span class="line"><span class="javascript"><span class="comment">// toPlayer(ele) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// uni.navigateTo(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// animationDuration:500,</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// animationType:&#x27;fade-in&#x27;,</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// url: &#x27;/pages/music/music-detail/palyer?id=&#x27; + ele.id + &#x27;&amp;index=&#x27; + ele.index + &#x27;&amp;list=&#x27; +</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// encodeURIComponent(JSON.stringify(ele.list))</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="title">play</span>(<span class="params">index, item</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">&quot;#musicList-play&quot;</span>, item)</span></span><br><span class="line"><span class="javascript"><span class="comment">//添加当前音乐列表</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setAudiolist(<span class="built_in">this</span>.list)</span></span><br><span class="line"><span class="javascript"><span class="comment">//如果不是同一首歌，则重置</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (<span class="built_in">this</span>.bgAudioManager.src !== item.song) &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setBgAudioManager(item)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setPlaydetail(&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">id</span>: item._id,</span></span><br><span class="line"><span class="javascript"><span class="attr">pic</span>: item.song_cover</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (<span class="built_in">this</span>.isplayingmusic) &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.pauseAudio()</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.playAudio()</span></span><br><span class="line"><span class="javascript"><span class="built_in">this</span>.setIsplayingmusic(<span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"><span class="comment">// this.isPlay = !this.isPlay;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.mulist</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">110</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">34</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css"><span class="attribute">padding</span>: <span class="number">30</span>rpx <span class="number">0</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.l</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.r</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">padding</span>: <span class="number">0</span>rpx <span class="number">25</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">50</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">line-height</span>: <span class="number">50</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">border</span>: <span class="number">2</span>rpx solid <span class="number">#e6e6e6</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">50</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css"><span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css"><span class="attribute">margin-bottom</span>: <span class="number">15</span>rpx;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.img</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">width</span>: <span class="number">100</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">18</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.index-item</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">34</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.text</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="css">;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">text &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.ar</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.point</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.item-icon</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">margin</span>: <span class="number">0</span> <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.cuIcon-right</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">34</span>rpx;</span></span><br><span class="line"><span class="css">// <span class="attribute">color</span>: <span class="number">#E7EBED</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">width</span>: <span class="number">68</span>rpx;</span></span><br><span class="line"><span class="css">// <span class="attribute">height</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.play-btn</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css"><span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">34</span>rpx;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">// <span class="attribute">width</span>: <span class="number">0</span>rpx;</span></span><br><span class="line"><span class="css"><span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">font-size</span>: <span class="number">10</span>rpx;</span></span><br><span class="line"><span class="css">// <span class="attribute">width</span>: <span class="number">68</span>rpx;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&amp;<span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="css"><span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css"><span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css"><span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">border</span>: <span class="number">2</span>rpx solid <span class="number">#000000</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">width</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">height</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="css"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>由于想要在每个页面中使用，所以我把<code>mini播放器</code>放在了页面最上方<code>导航栏</code>组件中<br><strong><code>cu-custom.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 里面内容就不显示了，就把需要引用的列出来--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">playerMin</span> <span class="attr">:require</span>=<span class="string">&quot;re&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">playerMin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> playerMin <span class="keyword">from</span> <span class="string">&#x27;@/components/playermin.vue&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">playerMin</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;uniapp-移动端的音乐播放器&quot;&gt;&lt;a href=&quot;#uniapp-移动端的音乐播放器&quot; class=&quot;headerlink&quot; title=&quot;uniapp 移动端的音乐播放器&quot;&gt;&lt;/a&gt;uniapp 移动端的音乐播放器&lt;/h1&gt;&lt;h2 id=&quot;写的原因&quot;&gt;&lt;a href=&quot;#写的原因&quot; class=&quot;headerlink&quot; title=&quot;写的原因&quot;&gt;&lt;/a&gt;写的原因&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;这个&lt;code&gt;app&lt;/code&gt;从4月份开始，做了一个星期，但中间有3个月没碰，8月末又重新拿了起来，但由于&lt;code&gt;uniapp&lt;/code&gt;的多次更新，导致&lt;code&gt;app&lt;/code&gt;出了问题，而且本人是刚学的vue2，3个月没碰，有些遗忘，需要重新学习才行，同时这个&lt;code&gt;app&lt;/code&gt;遇到的问题有些难以处理。&lt;br&gt;因此我想先整理出我一开始做出来的功能，以便后期如果需要重新开始，则可以把我想要的功能重新添加进去。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="technology" scheme="http://yoursite.com/categories/technology/"/>
    
    
    <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
    <category term="uniapp" scheme="http://yoursite.com/tags/uniapp/"/>
    
  </entry>
  
  <entry>
    <title>开发中防止忘记的功能和bug点</title>
    <link href="http://yoursite.com/2022/09/11/%E5%BC%80%E5%8F%91%E4%B8%AD%E9%98%B2%E6%AD%A2%E5%BF%98%E8%AE%B0%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8Cbug%E7%82%B9/"/>
    <id>http://yoursite.com/2022/09/11/%E5%BC%80%E5%8F%91%E4%B8%AD%E9%98%B2%E6%AD%A2%E5%BF%98%E8%AE%B0%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8Cbug%E7%82%B9/</id>
    <published>2022-09-11T12:35:20.000Z</published>
    <updated>2022-10-11T01:41:18.823Z</updated>
    
    <content type="html"><![CDATA[<p>1.需要文章免登录查看，文章可以不需要登录就能看（已处理，修改id表的读取权限，改成了都能read，就能跳过权限）<br>2.登录页面有报错，一键登录退出时有报错（新版本）,登录页面使用原始navigateBar<br>3.其中一个登录页面返回按钮有问题 (已处理，去掉此页面中样式，样式读取了一个css文件，此文件修改了当前页面的格式)<br>4.前面改好后，需要验证发布更新功能,(无法使用更新功能，需要进行debug判断才行)<br>5.数据库数据通过云函数来进行获取<br>4.登录时默认是图片,但打开确实list列表<br>5.list最后出现undefined, 可能和数据库读取有关，新版本遇到的情况。<br>4.其中一个登录页面有两个导航栏（navBar）,应该去掉原生的那个，保留自己的。</p><p>uniapp page.json 页面配置中添加 “navigationStyle”: “custom”，取消原生导航栏<br>navigationStyle导航栏样式，仅支持 default/custom。custom即取消默认的原生导航栏</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1.需要文章免登录查看，文章可以不需要登录就能看（已处理，修改id表的读取权限，改成了都能read，就能跳过权限）&lt;br&gt;2.登录页面有报错，一键登录退出时有报错（新版本）,登录页面使用原始navigateBar&lt;br&gt;3.其中一个登录页面返回按钮有问题 (已处理，去掉此页</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>vue2+uniapp+unicloud项目遇到问题</title>
    <link href="http://yoursite.com/2022/05/31/vue2+uniapp+unicloud%E9%A1%B9%E7%9B%AE%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2022/05/31/vue2+uniapp+unicloud%E9%A1%B9%E7%9B%AE%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</id>
    <published>2022-05-31T05:36:58.000Z</published>
    <updated>2023-09-03T01:49:38.813Z</updated>
    
    <content type="html"><![CDATA[<h2 id="2022-9-10更新"><a href="#2022-9-10更新" class="headerlink" title="2022-9-10更新"></a>2022-9-10更新</h2><p>我做了一个vue2的app。<br>在h5上面将程序写完，移动端打包后发现程序根本没法用，不能说没法用，只能说不怎么样。<br>由于是移动端，所以现在把遇到的一些问题和需求总结下。</p><span id="more"></span><h3 id="1-移动端tabbar无法使用svg图标。"><a href="#1-移动端tabbar无法使用svg图标。" class="headerlink" title="1.移动端tabbar无法使用svg图标。"></a>1.移动端tabbar无法使用svg图标。</h3><p>app打包后，打开程序遇到的第一个问题是tabbar图标居然无法显示。<br>由于想使用粉红色的图标，所以在阿里图标库中找了几个svg图标，在h5测试时没有问题，但在移动端上却出了问题，图标不显示，我把图标换成png发现显示了，然后我用搜索引擎一查，发现是原生的tabbar不支持svg图标，只能使用自定义tabbar.</p><h3 id="2-class-”swipe-item”导致轮播图（banner）无法显示"><a href="#2-class-”swipe-item”导致轮播图（banner）无法显示" class="headerlink" title="2.class=”swipe-item”导致轮播图（banner）无法显示"></a>2.class=”swipe-item”导致轮播图（banner）无法显示</h3><p>想想看，当打开app,发现首页上方背景是灰的，下面tabbar又是无图标的时候，自己的内心是多么崩溃，等于做了个寂寞。<br>后来发现这个class里面的样式在app中是失效的，图片不知道定位到了哪里。去除了这个class样式后，banner图终于显示出来了</p><h3 id="3-我的页面中无法显示问题。"><a href="#3-我的页面中无法显示问题。" class="headerlink" title="3.我的页面中无法显示问题。"></a>3.<code>我的</code>页面中无法显示问题。</h3><p>这个问题困扰了我一阵，明明h5端是能显示的，但移动端却页面空白。<br>后来发现是定义内容的时候，对象最后一个参数后面多了一个逗号。</p><h3 id="4-下载了网易mumu模拟器作为android虚拟机来测试app-却无法连接"><a href="#4-下载了网易mumu模拟器作为android虚拟机来测试app-却无法连接" class="headerlink" title="4.下载了网易mumu模拟器作为android虚拟机来测试app, 却无法连接"></a>4.下载了网易mumu模拟器作为android虚拟机来测试app, 却无法连接</h3><p>解决：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//控制台输入命令</span><br><span class="line">adb devices</span><br></pre></td></tr></table></figure><p>显示<code>list of devices attached</code>，下面没有设备显示，说明没有连接到模拟器<br>在网上查到 mumu模拟器的端口号是<code>hostport:7555</code>, <code>guestport:5555</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//使用命令</span><br><span class="line">adb connect 127.0.0.1:5555</span><br><span class="line">//关闭</span><br><span class="line">adb kill-server</span><br><span class="line">//启动</span><br><span class="line">adb start-server</span><br><span class="line">//查看设备</span><br><span class="line">adb devices</span><br></pre></td></tr></table></figure><p><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2022/09/10/0eFlm8GNYzac.png" alt="图片"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;2022-9-10更新&quot;&gt;&lt;a href=&quot;#2022-9-10更新&quot; class=&quot;headerlink&quot; title=&quot;2022-9-10更新&quot;&gt;&lt;/a&gt;2022-9-10更新&lt;/h2&gt;&lt;p&gt;我做了一个vue2的app。&lt;br&gt;在h5上面将程序写完，移动端打包后发现程序根本没法用，不能说没法用，只能说不怎么样。&lt;br&gt;由于是移动端，所以现在把遇到的一些问题和需求总结下。&lt;/p&gt;</summary>
    
    
    
    <category term="technology" scheme="http://yoursite.com/categories/technology/"/>
    
    
    <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
    <category term="uniapp" scheme="http://yoursite.com/tags/uniapp/"/>
    
  </entry>
  
  <entry>
    <title>Android平台签名证书(.keystore)生成指南</title>
    <link href="http://yoursite.com/2022/04/30/Android%E5%B9%B3%E5%8F%B0%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6(.keystore)%E7%94%9F%E6%88%90%E6%8C%87%E5%8D%97/"/>
    <id>http://yoursite.com/2022/04/30/Android%E5%B9%B3%E5%8F%B0%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6(.keystore)%E7%94%9F%E6%88%90%E6%8C%87%E5%8D%97/</id>
    <published>2022-04-30T14:09:16.000Z</published>
    <updated>2023-03-01T02:04:58.740Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Android平台签名证书-keystore-生成指南"><a href="#Android平台签名证书-keystore-生成指南" class="headerlink" title="Android平台签名证书(.keystore)生成指南"></a>Android平台签名证书(.keystore)生成指南</h1><h3 id="Android证书"><a href="#Android证书" class="headerlink" title="Android证书"></a>Android证书</h3><p>Android平台打包发布apk应用，需要使用数字证书（.keystore文件）进行签名，用于表明开发者身份。</p><blockquote><p>Android证书的生成是自助和免费的，不需要审批或付费。</p></blockquote><p>可以使用JRE环境中的keytool命令生成：</p><p>安装JRE环境（推荐使用JRE8环境，如已有可跳过）<br>可从Oracle官方下载jre安装包：<a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">https://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><span id="more"></span><p>生成签名证书<br>使用keytool -genkey命令生成证书：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -alias XXXXalias -keyalg RSA -keysize 2048 -validity 36500 -keystore XXXX.keystore</span><br></pre></td></tr></table></figure><p>XXXXalias是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字<br>XXXX.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径<br>36500是证书的有效期，表示100年有效期，单位天，建议时间设置长一点，避免证书过期<br>回车后会提示：</p><p>Enter keystore password:  //输入证书文件密码，输入完成回车<br>Re-enter new password:   //再次输入证书文件密码，输入完成回车<br>What is your first and last name?<br>  [Unknown]:  //输入名字和姓氏，输入完成回车<br>What is the name of your organizational unit?<br>  [Unknown]:  //输入组织单位名称，输入完成回车<br>What is the name of your organization?<br>  [Unknown]:  //输入组织名称，输入完成回车<br>What is the name of your City or Locality?<br>  [Unknown]:  //输入城市或区域名称，输入完成回车<br>What is the name of your State or Province?<br>  [Unknown]:  //输入省/市/自治区名称，输入完成回车<br>What is the two-letter country code for this unit?<br>  [Unknown]:  //输入国家/地区代号（两个字母），中国为CN，输入完成回车<br>Is CN=XX, OU=XX, O=XX, L=XX, ST=XX, C=XX correct?<br>  [no]:  //确认上面输入的内容是否正确，输入y，回车  </p><p>Enter key password for <testalias><br>        (RETURN if same as keystore password):  //确认证书密码与证书文件密码一样（HBuilder|HBuilderX要求这两个密码一致），直接回车就可以<br>以上命令运行完成后就会生成证书，路径为“D:\test.keystore”。</p><p><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2022/04/30/cejKn047q970.png" alt="配置时截的图"></p><p><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2022/04/30/S5uWGSXdFkZP.png" alt="配置好后截得图"></p><p>注意：上述信息填写要规范，乱填有可能会影响应用上架应用市场。</p><p>查看证书信息<br>可以使用以下命令查看：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore test.keystore  </span><br><span class="line">Enter keystore password: //输入密码，回车</span><br></pre></td></tr></table></figure><p>会输出以下格式信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Keystore type: PKCS12    </span><br><span class="line">Keystore provider: SUN    </span><br><span class="line"></span><br><span class="line">Your keystore contains 1 entry    </span><br><span class="line"></span><br><span class="line">Alias name: test    </span><br><span class="line">Creation date: 2019-10-28    </span><br><span class="line">Entry type: PrivateKeyEntry    </span><br><span class="line">Certificate chain length: 1    </span><br><span class="line">Certificate[1]:    </span><br><span class="line">Owner: CN=Tester, OU=Test, O=Test, L=HD, ST=BJ, C=CN    </span><br><span class="line">Issuer: CN=Tester, OU=Test, O=Test, L=HD, ST=BJ, C=CN    </span><br><span class="line">Serial number: 7dd12840    </span><br><span class="line">Valid from: Fri Jul 26 20:52:56 CST 2019 until: Sun Jul 02 20:52:56 CST 2119    </span><br><span class="line">Certificate fingerprints:    </span><br><span class="line">         MD5:  F9:F6:C8:1F:DB:AB:50:14:7D:6F:2C:4F:CE:E6:0A:A5    </span><br><span class="line">         SHA1: BB:AC:E2:2F:97:3B:18:02:E7:D6:69:A3:7A:28:EF:D2:3F:A3:68:E7    </span><br><span class="line">         SHA256: 24:11:7D:E7:36:12:BC:FE:AF:2A:6A:24:BD:04:4F:2E:33:E5:2D:41:96:5F:50:4D:74:17:7F:4F:E2:55:EB:26    </span><br><span class="line">Signature algorithm name: SHA256withRSA    </span><br><span class="line">Subject Public Key Algorithm: 2048-bit RSA key    </span><br><span class="line">Version: 3</span><br></pre></td></tr></table></figure><p><img src="http://ql-u-pic.oss-cn-shanghai.aliyuncs.com/upic/2022/04/30/4PFxuAnPLPst.png" alt="上面内容的截图"><br>其中证书指纹信息（Certificate fingerprints）：</p><p>MD5<br>证书的MD5指纹信息（安全码MD5）<br>SHA1<br>证书的SHA1指纹信息（安全码SHA1）<br>SHA256<br>证书的SHA256指纹信息（安全码SHA245）<br>安卓签名获取工具<br>直接通过一个apk，获取安装到手机的第三方应用签名的apk包。 详情：<a href="https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html">https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html</a></p><p>注意事项<br>云端打包默认会添加V1/V2签名，已知V1签名不支持2048位的DSA算法，使用2048-bit DSA key云端打包可能失败，提示以下错误：</p><ul><li>What went wrong:<br>Execution failed for task ‘:app:packageRelease’.  <blockquote><p>A failure occurred while executing com.android.build.gradle.tasks.PackageAndroidArtifact$IncrementalSplitterRunnable<br>java.io.IOException: Failed to generate v1 signature<br>解决方法</p></blockquote></li></ul><p>第一种方法：重新生成证书，在生成证书命令中添加“-keyalg RSA”参数指定使用RSA算法<br>第二种方法：设置miniSdkVersion大于等于24，因为V2签名需Android7及以上设备才支持，设置miniSdkVersion大于等于24表示不支持android7以下设备，从而不需要包含V1签名，设置miniSdkVersion详情参考：<a href="https://ask.dcloud.net.cn/article/193">https://ask.dcloud.net.cn/article/193</a><br>查看证书算法的方法<br>使用“keytool -list -v”查看证书信息，看“Subject Public Key Algorithm: ”项的信息，如下表示使用DSA算法：</p><p>Subject Public Key Algorithm: 2048-bit DSA key<br>其他<br>Android平台公共测试证书<br>Android平台DCloud公用证书（DCloud老版本证书）<br>可获取MD5签名的JDK版本分享<br>【详见】<a href="https://ask.dcloud.net.cn/article/38778">https://ask.dcloud.net.cn/article/38778</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Android平台签名证书-keystore-生成指南&quot;&gt;&lt;a href=&quot;#Android平台签名证书-keystore-生成指南&quot; class=&quot;headerlink&quot; title=&quot;Android平台签名证书(.keystore)生成指南&quot;&gt;&lt;/a&gt;Android平台签名证书(.keystore)生成指南&lt;/h1&gt;&lt;h3 id=&quot;Android证书&quot;&gt;&lt;a href=&quot;#Android证书&quot; class=&quot;headerlink&quot; title=&quot;Android证书&quot;&gt;&lt;/a&gt;Android证书&lt;/h3&gt;&lt;p&gt;Android平台打包发布apk应用，需要使用数字证书（.keystore文件）进行签名，用于表明开发者身份。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Android证书的生成是自助和免费的，不需要审批或付费。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;可以使用JRE环境中的keytool命令生成：&lt;/p&gt;
&lt;p&gt;安装JRE环境（推荐使用JRE8环境，如已有可跳过）&lt;br&gt;可从Oracle官方下载jre安装包：&lt;a href=&quot;https://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;https://www.oracle.com/technetwork/java/javase/downloads/index.html&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>获取远程共享文件夹</title>
    <link href="http://yoursite.com/2022/03/15/%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
    <id>http://yoursite.com/2022/03/15/%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/</id>
    <published>2022-03-15T12:28:49.000Z</published>
    <updated>2022-08-14T06:12:57.048Z</updated>
    
    <content type="html"><![CDATA[<p>windows:<br>调出命令框，说着使用搜索栏<br>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\\IP地址</span><br><span class="line">例如：</span><br><span class="line">\\192.168.0.1</span><br></pre></td></tr></table></figure><p>mac:<br>finder-&gt;前往-&gt;连接服务器<br>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ftp://IP地址</span><br><span class="line">例如：</span><br><span class="line">ftp://192.168.0.1</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;windows:&lt;br&gt;调出命令框，说着使用搜索栏&lt;br&gt;输入&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>VSCode 建立多项目工作区</title>
    <link href="http://yoursite.com/2022/03/03/VSCode-%E5%BB%BA%E7%AB%8B%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E4%BD%9C%E5%8C%BA/"/>
    <id>http://yoursite.com/2022/03/03/VSCode-%E5%BB%BA%E7%AB%8B%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E4%BD%9C%E5%8C%BA/</id>
    <published>2022-03-03T02:31:51.000Z</published>
    <updated>2023-09-03T01:50:00.770Z</updated>
    
    <content type="html"><![CDATA[<p>调出命令面板或者<code>文件 —&gt; 将文件夹添加到工作区</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//打开命令面板</span><br><span class="line">command+shift+P</span><br><span class="line">//添加项目文件夹</span><br><span class="line">&gt; add folder to workspace</span><br><span class="line">//保存工作空间</span><br><span class="line">&gt; save workspace as...</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;调出命令面板或者&lt;code&gt;文件 —&amp;gt; 将文件夹添加到工作区&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;</summary>
      
    
    
    
    
    <category term="vscode" scheme="http://yoursite.com/tags/vscode/"/>
    
  </entry>
  
  <entry>
    <title>mac ffmpeg下载配置</title>
    <link href="http://yoursite.com/2021/11/15/mac-ffmpeg%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2021/11/15/mac-ffmpeg%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AE/</id>
    <published>2021-11-15T05:42:35.000Z</published>
    <updated>2023-09-03T01:47:46.107Z</updated>
    
    <content type="html"><![CDATA[<p>为了把<code>b站</code>的视频<code>flv</code>格式转换成<code>MP4</code>格式，所以下载<code>ffmpeg</code>用来转换<code>MP4</code>格式.<br>正常下载使用 <code>brew</code>，但不知道为什么一直报错无法下载，最后觉得直接<a href="https://ffmpeg.org/download.html">官网下载</a>后，配置使用</p><span id="more"></span><p>下载好后，<code>vi ~/.bash_profile</code>，在文件最后添加上下面的环境变量就可以到处使用了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ffmpeg</span><br><span class="line">export PATH=$PATH:/Applications/projectForMyself/environment_configuration/ffmpegFloder/bin</span><br></pre></td></tr></table></figure><p>我把下载的<code>ffmpeg</code>，放在了<code>bin</code>文件里面，也就是<code>bin/ffmpeg</code>。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;为了把&lt;code&gt;b站&lt;/code&gt;的视频&lt;code&gt;flv&lt;/code&gt;格式转换成&lt;code&gt;MP4&lt;/code&gt;格式，所以下载&lt;code&gt;ffmpeg&lt;/code&gt;用来转换&lt;code&gt;MP4&lt;/code&gt;格式.&lt;br&gt;正常下载使用 &lt;code&gt;brew&lt;/code&gt;，但不知道为什么一直报错无法下载，最后觉得直接&lt;a href=&quot;https://ffmpeg.org/download.html&quot;&gt;官网下载&lt;/a&gt;后，配置使用&lt;/p&gt;</summary>
    
    
    
    
    <category term="bilibili" scheme="http://yoursite.com/tags/bilibili/"/>
    
    <category term="ffmpeg" scheme="http://yoursite.com/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>mac电脑遇到的svn证书验证失败问题</title>
    <link href="http://yoursite.com/2021/10/14/mac%E7%94%B5%E8%84%91%E9%81%87%E5%88%B0%E7%9A%84svn%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2021/10/14/mac%E7%94%B5%E8%84%91%E9%81%87%E5%88%B0%E7%9A%84svn%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</id>
    <published>2021-10-14T01:33:04.000Z</published>
    <updated>2021-10-14T01:40:23.279Z</updated>
    
    <content type="html"><![CDATA[<h1 id="svn报错：Server-SSL-certificate-verification-failed-certificate-has-expired-issuer-is-not-trusted"><a href="#svn报错：Server-SSL-certificate-verification-failed-certificate-has-expired-issuer-is-not-trusted" class="headerlink" title="svn报错：Server SSL certificate verification failed: certificate has expired, issuer is not trusted"></a>svn报错：Server SSL certificate verification failed: certificate has expired, issuer is not trusted</h1><p>第一次连接svn拉去代码时遇到的问题，原因是https证书验证失败。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>在终端中操作</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#地址请填自己的svn地址</span></span><br><span class="line">svn sl https://svn.xxxxxx/xxxx</span><br></pre></td></tr></table></figure><p>运行后，出现<code>是否需要重新验证</code>,R表示不打算验证，T和P表示临时和总是相信。<br>我们输入<code>P</code>总是相信<br>接下来需要输入账号密码等信息，直接输入svn的账号和密码即可。<br>以上操作完毕，就可以拉去代码了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;svn报错：Server-SSL-certificate-verification-failed-certificate-has-expired-issuer-is-not-trusted&quot;&gt;&lt;a href=&quot;#svn报错：Server-SSL-certifica</summary>
      
    
    
    
    
    <category term="-svn" scheme="http://yoursite.com/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>mac下载EasyConnect软件</title>
    <link href="http://yoursite.com/2021/10/14/mac%E4%B8%8B%E8%BD%BDeasyconnect%E8%BD%AF%E4%BB%B6/"/>
    <id>http://yoursite.com/2021/10/14/mac%E4%B8%8B%E8%BD%BDeasyconnect%E8%BD%AF%E4%BB%B6/</id>
    <published>2021-10-14T01:10:02.000Z</published>
    <updated>2023-09-03T01:48:44.625Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>前言<br>许多公司都是需要连接内网来进行开发的，所以需要下载easyConnect软件，但仍然会遇到无法下载的问题，所以记录一下经历</p></blockquote><p>一般公司都会让你发本机的MAC地址（电脑的物理地址），然后帮你开通内网.<br>开通好后，会给你一个<code>vpn.xxx.com</code>的地址，打开这个网址，会检测你电脑是否安装了<code>EasyConnect</code>，如果没有安装则会直接跳转到<code>EasyConnect</code>下载页面。</p><h2 id="如果你没法下载，注意！mac电脑请使用自带的Safari浏览器打开，才能下载mac的安装包"><a href="#如果你没法下载，注意！mac电脑请使用自带的Safari浏览器打开，才能下载mac的安装包" class="headerlink" title="如果你没法下载，注意！mac电脑请使用自带的Safari浏览器打开，才能下载mac的安装包"></a>如果你没法下载，<span style="color:red">注意！mac电脑请使用自带的<code>Safari浏览器</code>打开，才能下载mac的安装包</span></h2>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;前言&lt;br&gt;许多公司都是需要连接内网来进行开发的，所以需要下载easyConnect软件，但仍然会遇到无法下载的问题，所以记录一下经历&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一般公司都会让你发本机的MAC地址（电脑的物理地址），然后帮你开通内网</summary>
      
    
    
    
    <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
    <category term="-技术" scheme="http://yoursite.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
</feed>
